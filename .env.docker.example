# Shared Docker development configuration for LoRA Manager
# Copy to .env.docker and adjust as needed before running docker compose.

# -----------------------------------------------------------------------------
# Host / container UID mapping for file permissions
# -----------------------------------------------------------------------------
HOST_UID=1000
HOST_GID=1000

# -----------------------------------------------------------------------------
# Ports exposed on the host
# -----------------------------------------------------------------------------
API_PORT=8782
FRONTEND_PORT=5173
POSTGRES_PORT=5433
REDIS_PORT=6380
SDNEXT_PORT=7860

# -----------------------------------------------------------------------------
# Database configuration
# -----------------------------------------------------------------------------
POSTGRES_DB=lora
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# Connection string used by the backend and worker services
DATABASE_URL=postgresql+psycopg://postgres:postgres@postgres:5432/lora

# -----------------------------------------------------------------------------
# Redis configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379/0

# -----------------------------------------------------------------------------
# Backend application defaults
# -----------------------------------------------------------------------------
API_KEY=dev-api-key-123
SDNEXT_BASE_URL=http://sdnext:7860
SDNEXT_TIMEOUT=120
SDNEXT_POLL_INTERVAL=2
SDNEXT_DEFAULT_STEPS=20
SDNEXT_DEFAULT_SAMPLER=DPM++ 2M
SDNEXT_DEFAULT_CFG_SCALE=7.0
SDNEXT_OUTPUT_DIR=/workspace/outputs
LORA_HOST_DIR=../../loras
OUTPUT_HOST_DIR=../../outputs

# Optional ROCm overrides (used when including docker-compose.rocm.override.yml)
ROCM_SDNEXT_IMAGE=disty0/sdnext-rocm:latest
ROCM_MODELS_ROOT=/home/anxilinux/DeepVault/models
ROCM_SDNEXT_COMMANDLINE_ARGS=--listen --port 7860 --api --cors-origins '*' --data-dir /host/models --models-dir /host/models/Stable-diffusion
HSA_OVERRIDE_GFX_VERSION=10.3.0
ROC_ENABLE_PRE_VEGA=1
HIP_VISIBLE_DEVICES=0
MIOPEN_FIND_MODE=FAST
MIOPEN_USER_DB_PATH=/tmp/.miopen

# -----------------------------------------------------------------------------
# Frontend (Vite) configuration
# -----------------------------------------------------------------------------
VITE_BACKEND_URL=http://localhost:${API_PORT}
VITE_BACKEND_API_KEY=${API_KEY}

# -----------------------------------------------------------------------------
# Compose project name used for network/volume isolation
# -----------------------------------------------------------------------------
PROJECT_NAME=lora-manager
