{% from "components/lora-card.html" import lora_card %}

<!-- LoRA Grid/List Partial Template -->
<div class="lora-results">
    
    {% if loras %}
        {% if view_mode == 'list' %}
        <!-- List View -->
        <div class="lora-list">
            {% for lora in loras %}
            {{ lora_card(lora, 'list', bulk_mode) }}
            {% endfor %}
        </div>
        {% else %}
        <!-- Grid View -->
        <div class="lora-grid">
            {% for lora in loras %}
            {{ lora_card(lora, 'grid', bulk_mode) }}
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Pagination Info (if applicable) -->
        {% if pagination %}
        <div class="pagination-info">
            <div>
                Showing {{ pagination.start }} to {{ pagination.end }} of {{ pagination.total }} results
            </div>
            {% if pagination.has_more %}
            <button hx-get="{{ pagination.next_url }}" 
                    hx-target="#lora-container"
                    hx-swap="innerHTML"
                    class="load-more-button">
                Load More
            </button>
            {% endif %}
        </div>
        {% endif %}
        
    {% else %}
        <!-- Empty State -->
        <div class="empty-state-container-lg">
            <svg class="empty-state-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
            <h3 class="empty-state-title">No LoRAs found</h3>
            <p class="empty-state-message">
                {% if search_term or has_filters %}
                Try adjusting your search or filters.
                {% else %}
                Get started by importing some LoRAs.
                {% endif %}
            </p>
            <div class="empty-state-actions">
                {% if search_term or has_filters %}
                <button onclick="clearFilters()" 
                        class="btn btn-secondary mr-3">
                    Clear Filters
                </button>
                {% endif %}
                <button class="btn btn-primary">
                    Import LoRAs
                </button>
            </div>
        </div>
    {% endif %}
</div>

<!-- 
    The 'lora-data-updated' event is now triggered by the server via an HX-Trigger header.
    The main JavaScript file (common.js) should listen for this event to update counts
    and notify other components.
-->
