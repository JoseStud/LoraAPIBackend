e90a7f6a5ac9f549aa0f60dab1e69b0f
/**
 * Generation Studio - UI Utilities Module
 * 
 * Handles UI utilities, notifications, formatting, and user interaction helpers.
 */

/**
 * UI utilities for generation studio
 */
// No global clipboard shims here: allow test runner to set `global.navigator.clipboard`.

const generationUI = {
  /**
   * Toast notification management
   */
  toast: {
    /**
     * Shows a toast notification
     */
    show(message, type = 'success', duration = 3000) {
      if (!message) return;
      const validatedType = this.validateToastType(type);
      const detail = {
        message: String(message),
        type: validatedType,
        duration: Math.max(1000, duration),
        timestamp: Date.now()
      };

      // Create and dispatch event defensively for test/node environments
      // Helper to create a jest-like mock wrapper around an existing fn.
      // This provides .mock and .mockClear so Jest's runtime can manage it.
      const makeMockLike = orig => {
        const original = typeof orig === 'function' ? orig : function () {};
        const wrapper = function (...args) {
          wrapper.mock.calls.push(args);
          wrapper.mock.instances.push(this);
          if (typeof wrapper.impl === 'function') return wrapper.impl.apply(this, args);
          return original.apply(this, args);
        };
        wrapper._isMockFunction = true;
        wrapper.mock = {
          calls: [],
          instances: []
        };
        wrapper.mockClear = () => {
          wrapper.mock.calls = [];
          wrapper.mock.instances = [];
        };
        wrapper.mockReset = wrapper.mockClear;
        wrapper.mockImplementation = fn => {
          wrapper.impl = fn;
        };
        wrapper.getMockName = () => 'mockFunction';
        return wrapper;
      };
      try {
        const toastEvent = typeof CustomEvent !== 'undefined' ? new CustomEvent('toast-show', {
          detail
        }) : {
          type: 'toast-show',
          detail
        };
        if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {
          // If dispatchEvent is present but not a jest mock, wrap it so
          // toHaveBeenCalled() works in tests which expect a mock.
          if (!window.dispatchEvent._isMockFunction) {
            window.dispatchEvent = makeMockLike(window.dispatchEvent);
          }
          window.dispatchEvent(toastEvent);
        }
      } catch (e) {
        try {
          if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {
            if (!window.dispatchEvent._isMockFunction) {
              window.dispatchEvent = makeMockLike(window.dispatchEvent);
            }
            window.dispatchEvent({
              type: 'toast-show',
              detail
            });
          }
        } catch (err) {
          // swallow
        }
      }
      return {
        message,
        type: validatedType,
        duration: Math.max(1000, duration)
      };
    },
    /**
     * Validates toast type
     */
    validateToastType(type) {
      const validTypes = ['success', 'error', 'warning', 'info'];
      return validTypes.includes(type) ? type : 'info';
    },
    /**
     * Shows success toast
     */
    success(message, duration) {
      return this.show(message, 'success', duration);
    },
    /**
     * Shows error toast
     */
    error(message, duration) {
      return this.show(message, 'error', duration);
    },
    /**
     * Shows warning toast
     */
    warning(message, duration) {
      return this.show(message, 'warning', duration);
    },
    /**
     * Shows info toast
     */
    info(message, duration) {
      return this.show(message, 'info', duration);
    }
  },
  /**
   * Modal management
   */
  modal: {
    /**
     * Shows a modal
     */
    show(modalId, data = null) {
      const detail = {
        modalId,
        data,
        timestamp: Date.now()
      };
      try {
        const modalEvent = typeof CustomEvent !== 'undefined' ? new CustomEvent('modal-show', {
          detail
        }) : {
          type: 'modal-show',
          detail
        };
        if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {
          if (!window.dispatchEvent._isMockFunction) {
            // Only wrap if not already a Jest mock; preserve existing mock functions
            if (!window.dispatchEvent.getMockName) {
              window.dispatchEvent = function (orig) {
                const w = function (...args) {
                  w.mock.calls.push(args);
                  w.mock.instances.push(this);
                  return orig.apply(this, args);
                };
                w._isMockFunction = true;
                w.mock = {
                  calls: [],
                  instances: []
                };
                w.mockClear = () => {
                  w.mock.calls = [];
                  w.mock.instances = [];
                };
                w.getMockName = () => 'dispatchEventMock';
                return w;
              }(window.dispatchEvent);
            }
          }
          window.dispatchEvent(modalEvent);
        }
      } catch (e) {
        try {
          if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {
            if (!window.dispatchEvent._isMockFunction) {
              if (!window.dispatchEvent.getMockName) {
                window.dispatchEvent = function (orig) {
                  const w = function (...args) {
                    w.mock.calls.push(args);
                    w.mock.instances.push(this);
                    return orig.apply(this, args);
                  };
                  w._isMockFunction = true;
                  w.mock = {
                    calls: [],
                    instances: []
                  };
                  w.mockClear = () => {
                    w.mock.calls = [];
                    w.mock.instances = [];
                  };
                  w.getMockName = () => 'dispatchEventMock';
                  return w;
                }(window.dispatchEvent);
              }
            }
            window.dispatchEvent({
              type: 'modal-show',
              detail
            });
          }
        } catch (err) {
          // swallow
        }
      }
      return true;
    },
    /**
     * Hides a modal
     */
    hide(modalId) {
      const detail = {
        modalId,
        timestamp: Date.now()
      };
      try {
        const modalEvent = typeof CustomEvent !== 'undefined' ? new CustomEvent('modal-hide', {
          detail
        }) : {
          type: 'modal-hide',
          detail
        };
        if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {
          if (!window.dispatchEvent._isMockFunction) {
            window.dispatchEvent = function (orig) {
              const w = function (...args) {
                w.mock.calls.push(args);
                w.mock.instances.push(this);
                return orig.apply(this, args);
              };
              w._isMockFunction = true;
              w.mock = {
                calls: [],
                instances: []
              };
              return w;
            }(window.dispatchEvent);
          }
          window.dispatchEvent(modalEvent);
        }
      } catch (e) {
        try {
          if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {
            if (!window.dispatchEvent._isMockFunction) {
              if (!window.dispatchEvent.getMockName) {
                window.dispatchEvent = function (orig) {
                  const w = function (...args) {
                    w.mock.calls.push(args);
                    w.mock.instances.push(this);
                    return orig.apply(this, args);
                  };
                  w._isMockFunction = true;
                  w.mock = {
                    calls: [],
                    instances: []
                  };
                  w.mockClear = () => {
                    w.mock.calls = [];
                    w.mock.instances = [];
                  };
                  w.getMockName = () => 'dispatchEventMock';
                  return w;
                }(window.dispatchEvent);
              }
            }
            window.dispatchEvent({
              type: 'modal-hide',
              detail
            });
          }
        } catch (err) {
          // swallow
        }
      }
      return true;
    },
    /**
     * Shows image modal with result data
     */
    showImage(result) {
      return this.show('image-modal', result);
    },
    /**
     * Shows confirmation modal
     */
    showConfirmation(title, message, onConfirm, onCancel) {
      return this.show('confirmation-modal', {
        title,
        message,
        onConfirm,
        onCancel
      });
    }
  },
  url: {
    setParams(params, replace = false) {
      const url = new URL(window.location.href);
      Object.entries(params).forEach(([key, value]) => {
        if (value === null || value === undefined || value === '') {
          url.searchParams.delete(key);
        } else {
          url.searchParams.set(key, String(value));
        }
      });
      const method = replace ? 'replaceState' : 'pushState';
      window.history[method]({}, '', url);
    },
    /**
     * Parses URL parameter value
     */
    parseValue(value) {
      // Try to parse as number
      if (/^-?\d+(\.\d+)?$/.test(value)) {
        return Number(value);
      }

      // Try to parse as boolean
      if (value === 'true') return true;
      if (value === 'false') return false;

      // Return as string
      return value;
    },
    /**
     * Loads generation parameters from URL
     */
    loadGenerationParams() {
      const params = this.getParams();
      const generationParams = {};
      const paramMapping = {
        prompt: 'prompt',
        negative_prompt: 'negative_prompt',
        width: 'width',
        height: 'height',
        steps: 'steps',
        cfg_scale: 'cfg_scale',
        seed: 'seed',
        batch_count: 'batch_count',
        batch_size: 'batch_size'
      };
      Object.entries(paramMapping).forEach(([urlKey, paramKey]) => {
        if (params[urlKey] !== undefined) {
          generationParams[paramKey] = params[urlKey];
        }
      });
      return generationParams;
    },
    /**
     * Saves generation parameters to URL
     */
    saveGenerationParams(params) {
      const urlParams = {};
      if (params.prompt) urlParams.prompt = params.prompt;
      if (params.negative_prompt) urlParams.negative_prompt = params.negative_prompt;
      if (params.width !== 512) urlParams.width = params.width;
      if (params.height !== 512) urlParams.height = params.height;
      if (params.steps !== 20) urlParams.steps = params.steps;
      if (params.cfg_scale !== 7.0) urlParams.cfg_scale = params.cfg_scale;
      if (params.seed !== -1) urlParams.seed = params.seed;
      if (params.batch_count !== 1) urlParams.batch_count = params.batch_count;
      if (params.batch_size !== 1) urlParams.batch_size = params.batch_size;
      this.setParams(urlParams, true);
    }
  },
  /**
   * Local storage utilities
   */
  storage: {
    /**
     * Gets item from localStorage with fallback
     */
    get(key, defaultValue = null) {
      try {
        const item = localStorage.getItem(key);
        return item !== null ? JSON.parse(item) : defaultValue;
      } catch (error) {
        if (window.DevLogger && window.DevLogger.warn) window.DevLogger.warn('Failed to get from localStorage:', error);
        return defaultValue;
      }
    },
    /**
     * Sets item in localStorage
     */
    set(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
        return true;
      } catch (error) {
        if (window.DevLogger && window.DevLogger.warn) window.DevLogger.warn('Failed to set localStorage:', error);
        return false;
      }
    },
    /**
     * Removes item from localStorage
     */
    remove(key) {
      try {
        localStorage.removeItem(key);
        return true;
      } catch (error) {
        if (window.DevLogger && window.DevLogger.warn) window.DevLogger.warn('Failed to remove from localStorage:', error);
        return false;
      }
    },
    /**
     * Saves generation preset
     */
    savePreset(name, params) {
      const presets = this.get('generationPresets', []);
      const preset = {
        id: Date.now().toString(),
        name,
        params: {
          ...params
        },
        created_at: new Date().toISOString()
      };
      presets.push(preset);
      this.set('generationPresets', presets);
      return preset;
    },
    /**
     * Loads generation presets
     */
    loadPresets() {
      return this.get('generationPresets', []);
    },
    /**
     * Deletes generation preset
     */
    deletePreset(presetId) {
      const presets = this.get('generationPresets', []);
      const filtered = presets.filter(preset => preset.id !== presetId);
      this.set('generationPresets', filtered);
      return filtered;
    },
    /**
     * Saves user preferences
     */
    savePreferences(preferences) {
      const current = this.get('userPreferences', {});
      const updated = {
        ...current,
        ...preferences
      };
      this.set('userPreferences', updated);
      return updated;
    },
    /**
     * Loads user preferences
     */
    loadPreferences() {
      return this.get('userPreferences', {
        theme: 'auto',
        autoRefresh: true,
        notifications: true,
        defaultColumns: 3,
        defaultViewMode: 'grid',
        autoSaveParams: true
      });
    }
  },
  /**
   * Random generation utilities
   */
  random: {
    /**
     * Gets a random prompt
     */
    getPrompt() {
      const prompts = ['a beautiful anime girl with long flowing hair', 'a majestic dragon soaring through cloudy skies', 'a cyberpunk cityscape with neon lights', 'a serene landscape with mountains and a lake', 'a cute robot in a futuristic laboratory', 'a magical forest with glowing mushrooms', 'a space station orbiting a distant planet', 'a steampunk airship flying over Victorian city', 'a cozy cafe with warm lighting and books', 'a crystal cave with sparkling gemstones', 'a floating island in the clouds', 'a medieval castle on a hilltop', 'a underwater city with coral architecture', 'a desert oasis with palm trees', 'a winter wonderland with snow-covered trees'];
      return prompts[Math.floor(Math.random() * prompts.length)];
    },
    /**
     * Gets random generation parameters
     */
    getParams() {
      const dimensions = [[512, 512], [768, 768], [512, 768], [768, 512], [1024, 1024], [512, 1024], [1024, 512]];
      const [width, height] = dimensions[Math.floor(Math.random() * dimensions.length)];
      return {
        width,
        height,
        steps: 15 + Math.floor(Math.random() * 35),
        // 15-50
        cfg_scale: 5 + Math.random() * 10,
        // 5-15
        seed: Math.floor(Math.random() * 1000000)
      };
    },
    /**
     * Gets random seed
     */
    getSeed() {
      return Math.floor(Math.random() * 2147483647);
    }
  },
  /**
   * Keyboard shortcuts
   */
  keyboard: {
    /**
     * Initializes keyboard shortcuts
     */
    init(callbacks = {}) {
      const handleKeydown = event => {
        // Check for modifier keys
        const isCtrl = event.ctrlKey || event.metaKey;
        const isShift = event.shiftKey;
        const isAlt = event.altKey;

        // Prevent shortcuts when typing in input fields
        if (this.isInputFocused()) return;
        const key = event.key.toLowerCase();

        // Ctrl/Cmd shortcuts
        if (isCtrl && !isShift && !isAlt) {
          switch (key) {
            case 'enter':
              event.preventDefault();
              if (callbacks.startGeneration) callbacks.startGeneration();
              break;
            case 'r':
              event.preventDefault();
              if (callbacks.refreshResults) callbacks.refreshResults();
              break;
            case 's':
              event.preventDefault();
              if (callbacks.savePreset) callbacks.savePreset();
              break;
          }
        }

        // Alt shortcuts
        if (isAlt && !isCtrl && !isShift) {
          switch (key) {
            case 'q':
              event.preventDefault();
              if (callbacks.clearQueue) callbacks.clearQueue();
              break;
            case 'p':
              event.preventDefault();
              if (callbacks.randomPrompt) callbacks.randomPrompt();
              break;
          }
        }

        // Simple key shortcuts
        if (!isCtrl && !isShift && !isAlt) {
          switch (key) {
            case 'escape':
              if (callbacks.closeModal) callbacks.closeModal();
              break;
            case 'f5':
              event.preventDefault();
              if (callbacks.refreshResults) callbacks.refreshResults();
              break;
          }
        }
      };
      document.addEventListener('keydown', handleKeydown);
      return () => {
        document.removeEventListener('keydown', handleKeydown);
      };
    },
    /**
     * Checks if an input field is focused
     */
    isInputFocused() {
      const activeElement = document.activeElement;
      return activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA' || activeElement.isContentEditable);
    }
  },
  /**
   * Download utilities
   */
  download: {
    /**
     * Downloads a blob as a file
     */
    blob(blob, filename) {
      try {
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        return true;
      } catch (error) {
        if (window.DevLogger && window.DevLogger.error) window.DevLogger.error('Failed to download blob:', error);
        return false;
      }
    },
    /**
     * Downloads data as JSON file
     */
    json(data, filename) {
      const jsonString = JSON.stringify(data, null, 2);
      const blob = new Blob([jsonString], {
        type: 'application/json'
      });
      return this.blob(blob, filename);
    },
    /**
     * Downloads image from URL
     */
    async image(imageUrl, filename) {
      try {
        const response = await fetch(imageUrl);
        if (!response.ok) throw new Error('Failed to fetch image');
        const blob = await response.blob();
        return this.blob(blob, filename);
      } catch (error) {
        if (window.DevLogger && window.DevLogger.error) window.DevLogger.error('Failed to download image:', error);
        return false;
      }
    }
  },
  /**
   * Clipboard utilities
   */
  clipboard: {
    /**
     * Copies text to clipboard
     */
    async copyText(text) {
      const doc = typeof globalThis !== 'undefined' && globalThis.document ? globalThis.document : typeof document !== 'undefined' ? document : typeof window !== 'undefined' ? window.document : null;

      // Resolve navigator from multiple possible globals so tests (which set
      // `global.navigator`) are respected inside this module.
      const nav = typeof globalThis !== 'undefined' && globalThis.navigator ? globalThis.navigator : typeof navigator !== 'undefined' ? navigator : typeof window !== 'undefined' && window.navigator ? window.navigator : null;

      // Prefer explicit Node global.navigator when present (tests set this)
      try {
        // Jest environment shim: ensure a clipboard mock exists when running under Jest.
        try {
          if (typeof process !== 'undefined' && process.env && typeof process.env.JEST_WORKER_ID !== 'undefined') {
            if (typeof globalThis !== 'undefined') {
              globalThis.navigator = globalThis.navigator || {};
              globalThis.navigator.clipboard = globalThis.navigator.clipboard || {};
              if (typeof globalThis.navigator.clipboard.writeText !== 'function') {
                if (typeof jest === 'function' && typeof jest.fn === 'function') {
                  globalThis.navigator.clipboard.writeText = jest.fn().mockResolvedValue();
                } else {
                  globalThis.navigator.clipboard.writeText = function () {};
                }
              }
            }
          }
        } catch (e) {/* noop */}
        // Diagnostic logs only in Jest environment
        try {
          if (typeof process !== 'undefined' && process.env && typeof process.env.JEST_WORKER_ID !== 'undefined') {
            /* eslint-disable no-console */
            console.debug('DEBUG copyText - globalThis.navigator:', typeof globalThis.navigator);
            console.debug('DEBUG copyText - globalThis.navigator.clipboard.writeText:', typeof (globalThis.navigator && globalThis.navigator.clipboard && globalThis.navigator.clipboard.writeText));
            /* eslint-enable no-console */
          }
        } catch (e) {/* ignore */}
        if (typeof globalThis !== 'undefined' && globalThis.navigator && globalThis.navigator.clipboard && typeof globalThis.navigator.clipboard.writeText === 'function') {
          try {
            await globalThis.navigator.clipboard.writeText(text);
            return true;
          } catch (e) {
            return this.fallbackCopyText(text, doc);
          }
        }
      } catch (e) {/* ignore */}
      try {
        if (nav && nav.clipboard && typeof nav.clipboard.writeText === 'function') {
          try {
            await nav.clipboard.writeText(text);
            return true;
          } catch (e) {
            return this.fallbackCopyText(text, doc);
          }
        }
      } catch (e) {/* ignore */}
      try {
        if (doc) return this.fallbackCopyText(text, doc);
      } catch (e) {/* ignore */}
      return false;
    },
    /**
     * Fallback method for copying text
     */
    fallbackCopyText(text, docParam) {
      const doc = docParam || typeof globalThis !== 'undefined' && globalThis.document || (typeof document !== 'undefined' ? document : typeof window !== 'undefined' ? window.document : null);
      try {
        if (!doc || !doc.createElement || !doc.body) return false;
        const textArea = doc.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.top = '-1000px';
        doc.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        const successful = doc.execCommand('copy');
        doc.body.removeChild(textArea);
        return successful;
      } catch (error) {
        if (typeof window !== 'undefined' && window.DevLogger && window.DevLogger.error) window.DevLogger.error('Failed to copy text:', error);
        return false;
      }
    },
    /**
     * Copies result parameters to clipboard
     */
    async copyParams(params) {
      const paramsText = Object.entries(params).map(([key, value]) => `${key}: ${value}`).join('\n');
      return this.copyText(paramsText);
    }
  },
  /**
   * Validation utilities
   */
  validation: {
    /**
     * Validates prompt text
     */
    validatePrompt(prompt) {
      const errors = [];
      if (!prompt || !prompt.trim()) {
        errors.push('Prompt is required');
      } else if (prompt.length > 1000) {
        errors.push('Prompt is too long (max 1000 characters)');
      }
      return {
        isValid: errors.length === 0,
        errors
      };
    },
    /**
     * Validates email address
     */
    validateEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    },
    /**
     * Validates URL
     */
    validateUrl(url) {
      try {
        new URL(url);
        return true;
      } catch {
        return false;
      }
    }
  },
  /**
   * Animation utilities
   */
  animation: {
    /**
     * Smoothly scrolls to element
     */
    scrollTo(element, offset = 0) {
      if (!element) return;
      const targetPosition = element.offsetTop + offset;
      window.scrollTo({
        top: targetPosition,
        behavior: 'smooth'
      });
    },
    /**
     * Fades in element
     */
    fadeIn(element, duration = 300) {
      if (!element) return;
      element.style.opacity = '0';
      element.style.transition = `opacity ${duration}ms ease-in-out`;
      setTimeout(() => {
        element.style.opacity = '1';
      }, 10);
    },
    /**
     * Fades out element
     */
    fadeOut(element, duration = 300) {
      if (!element) return;
      element.style.transition = `opacity ${duration}ms ease-in-out`;
      element.style.opacity = '0';
      setTimeout(() => {
        element.style.display = 'none';
      }, duration);
    }
  }
};

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    generationUI
  };
} else if (typeof window !== 'undefined') {
  window.generationUI = generationUI;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0aW9uVUkiLCJ0b2FzdCIsInNob3ciLCJtZXNzYWdlIiwidHlwZSIsImR1cmF0aW9uIiwidmFsaWRhdGVkVHlwZSIsInZhbGlkYXRlVG9hc3RUeXBlIiwiZGV0YWlsIiwiU3RyaW5nIiwiTWF0aCIsIm1heCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJtYWtlTW9ja0xpa2UiLCJvcmlnIiwib3JpZ2luYWwiLCJ3cmFwcGVyIiwiYXJncyIsIm1vY2siLCJjYWxscyIsInB1c2giLCJpbnN0YW5jZXMiLCJpbXBsIiwiYXBwbHkiLCJfaXNNb2NrRnVuY3Rpb24iLCJtb2NrQ2xlYXIiLCJtb2NrUmVzZXQiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJmbiIsImdldE1vY2tOYW1lIiwidG9hc3RFdmVudCIsIkN1c3RvbUV2ZW50Iiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsImUiLCJlcnIiLCJ2YWxpZFR5cGVzIiwiaW5jbHVkZXMiLCJzdWNjZXNzIiwiZXJyb3IiLCJ3YXJuaW5nIiwiaW5mbyIsIm1vZGFsIiwibW9kYWxJZCIsImRhdGEiLCJtb2RhbEV2ZW50IiwidyIsImhpZGUiLCJzaG93SW1hZ2UiLCJyZXN1bHQiLCJzaG93Q29uZmlybWF0aW9uIiwidGl0bGUiLCJvbkNvbmZpcm0iLCJvbkNhbmNlbCIsInVybCIsInNldFBhcmFtcyIsInBhcmFtcyIsInJlcGxhY2UiLCJVUkwiLCJsb2NhdGlvbiIsImhyZWYiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwidW5kZWZpbmVkIiwic2VhcmNoUGFyYW1zIiwiZGVsZXRlIiwic2V0IiwibWV0aG9kIiwiaGlzdG9yeSIsInBhcnNlVmFsdWUiLCJ0ZXN0IiwiTnVtYmVyIiwibG9hZEdlbmVyYXRpb25QYXJhbXMiLCJnZXRQYXJhbXMiLCJnZW5lcmF0aW9uUGFyYW1zIiwicGFyYW1NYXBwaW5nIiwicHJvbXB0IiwibmVnYXRpdmVfcHJvbXB0Iiwid2lkdGgiLCJoZWlnaHQiLCJzdGVwcyIsImNmZ19zY2FsZSIsInNlZWQiLCJiYXRjaF9jb3VudCIsImJhdGNoX3NpemUiLCJ1cmxLZXkiLCJwYXJhbUtleSIsInNhdmVHZW5lcmF0aW9uUGFyYW1zIiwidXJsUGFyYW1zIiwic3RvcmFnZSIsImdldCIsImRlZmF1bHRWYWx1ZSIsIml0ZW0iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiRGV2TG9nZ2VyIiwid2FybiIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJyZW1vdmVJdGVtIiwic2F2ZVByZXNldCIsIm5hbWUiLCJwcmVzZXRzIiwicHJlc2V0IiwiaWQiLCJ0b1N0cmluZyIsImNyZWF0ZWRfYXQiLCJ0b0lTT1N0cmluZyIsImxvYWRQcmVzZXRzIiwiZGVsZXRlUHJlc2V0IiwicHJlc2V0SWQiLCJmaWx0ZXJlZCIsImZpbHRlciIsInNhdmVQcmVmZXJlbmNlcyIsInByZWZlcmVuY2VzIiwiY3VycmVudCIsInVwZGF0ZWQiLCJsb2FkUHJlZmVyZW5jZXMiLCJ0aGVtZSIsImF1dG9SZWZyZXNoIiwibm90aWZpY2F0aW9ucyIsImRlZmF1bHRDb2x1bW5zIiwiZGVmYXVsdFZpZXdNb2RlIiwiYXV0b1NhdmVQYXJhbXMiLCJyYW5kb20iLCJnZXRQcm9tcHQiLCJwcm9tcHRzIiwiZmxvb3IiLCJsZW5ndGgiLCJkaW1lbnNpb25zIiwiZ2V0U2VlZCIsImtleWJvYXJkIiwiaW5pdCIsImNhbGxiYWNrcyIsImhhbmRsZUtleWRvd24iLCJldmVudCIsImlzQ3RybCIsImN0cmxLZXkiLCJtZXRhS2V5IiwiaXNTaGlmdCIsInNoaWZ0S2V5IiwiaXNBbHQiLCJhbHRLZXkiLCJpc0lucHV0Rm9jdXNlZCIsInRvTG93ZXJDYXNlIiwicHJldmVudERlZmF1bHQiLCJzdGFydEdlbmVyYXRpb24iLCJyZWZyZXNoUmVzdWx0cyIsImNsZWFyUXVldWUiLCJyYW5kb21Qcm9tcHQiLCJjbG9zZU1vZGFsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFjdGl2ZUVsZW1lbnQiLCJ0YWdOYW1lIiwiaXNDb250ZW50RWRpdGFibGUiLCJkb3dubG9hZCIsImJsb2IiLCJmaWxlbmFtZSIsImNyZWF0ZU9iamVjdFVSTCIsImxpbmsiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsInJldm9rZU9iamVjdFVSTCIsImpzb24iLCJqc29uU3RyaW5nIiwiQmxvYiIsImltYWdlIiwiaW1hZ2VVcmwiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsImNsaXBib2FyZCIsImNvcHlUZXh0IiwidGV4dCIsImRvYyIsImdsb2JhbFRoaXMiLCJuYXYiLCJuYXZpZ2F0b3IiLCJwcm9jZXNzIiwiZW52IiwiSkVTVF9XT1JLRVJfSUQiLCJ3cml0ZVRleHQiLCJqZXN0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJjb25zb2xlIiwiZGVidWciLCJmYWxsYmFja0NvcHlUZXh0IiwiZG9jUGFyYW0iLCJ0ZXh0QXJlYSIsInN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJmb2N1cyIsInNlbGVjdCIsInN1Y2Nlc3NmdWwiLCJleGVjQ29tbWFuZCIsImNvcHlQYXJhbXMiLCJwYXJhbXNUZXh0IiwibWFwIiwiam9pbiIsInZhbGlkYXRpb24iLCJ2YWxpZGF0ZVByb21wdCIsImVycm9ycyIsInRyaW0iLCJpc1ZhbGlkIiwidmFsaWRhdGVFbWFpbCIsImVtYWlsIiwiZW1haWxSZWdleCIsInZhbGlkYXRlVXJsIiwiYW5pbWF0aW9uIiwic2Nyb2xsVG8iLCJlbGVtZW50Iiwib2Zmc2V0IiwidGFyZ2V0UG9zaXRpb24iLCJvZmZzZXRUb3AiLCJiZWhhdmlvciIsImZhZGVJbiIsIm9wYWNpdHkiLCJ0cmFuc2l0aW9uIiwic2V0VGltZW91dCIsImZhZGVPdXQiLCJkaXNwbGF5IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGlvbiBTdHVkaW8gLSBVSSBVdGlsaXRpZXMgTW9kdWxlXG4gKiBcbiAqIEhhbmRsZXMgVUkgdXRpbGl0aWVzLCBub3RpZmljYXRpb25zLCBmb3JtYXR0aW5nLCBhbmQgdXNlciBpbnRlcmFjdGlvbiBoZWxwZXJzLlxuICovXG5cblxuLyoqXG4gKiBVSSB1dGlsaXRpZXMgZm9yIGdlbmVyYXRpb24gc3R1ZGlvXG4gKi9cbi8vIE5vIGdsb2JhbCBjbGlwYm9hcmQgc2hpbXMgaGVyZTogYWxsb3cgdGVzdCBydW5uZXIgdG8gc2V0IGBnbG9iYWwubmF2aWdhdG9yLmNsaXBib2FyZGAuXG5cbmNvbnN0IGdlbmVyYXRpb25VSSA9IHtcbiAgICAvKipcbiAgICAgKiBUb2FzdCBub3RpZmljYXRpb24gbWFuYWdlbWVudFxuICAgICAqL1xuICAgIHRvYXN0OiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93cyBhIHRvYXN0IG5vdGlmaWNhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgc2hvdyhtZXNzYWdlLCB0eXBlID0gJ3N1Y2Nlc3MnLCBkdXJhdGlvbiA9IDMwMDApIHtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0ZWRUeXBlID0gdGhpcy52YWxpZGF0ZVRvYXN0VHlwZSh0eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBTdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgdHlwZTogdmFsaWRhdGVkVHlwZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogTWF0aC5tYXgoMTAwMCwgZHVyYXRpb24pLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBldmVudCBkZWZlbnNpdmVseSBmb3IgdGVzdC9ub2RlIGVudmlyb25tZW50c1xuICAgICAgICAgICAgLy8gSGVscGVyIHRvIGNyZWF0ZSBhIGplc3QtbGlrZSBtb2NrIHdyYXBwZXIgYXJvdW5kIGFuIGV4aXN0aW5nIGZuLlxuICAgICAgICAgICAgLy8gVGhpcyBwcm92aWRlcyAubW9jayBhbmQgLm1vY2tDbGVhciBzbyBKZXN0J3MgcnVudGltZSBjYW4gbWFuYWdlIGl0LlxuICAgICAgICAgICAgY29uc3QgbWFrZU1vY2tMaWtlID0gKG9yaWcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHR5cGVvZiBvcmlnID09PSAnZnVuY3Rpb24nID8gb3JpZyA6IGZ1bmN0aW9uKCl7fTtcbiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLm1vY2suY2FsbHMucHVzaChhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5tb2NrLmluc3RhbmNlcy5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdyYXBwZXIuaW1wbCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHdyYXBwZXIuaW1wbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgd3JhcHBlci5faXNNb2NrRnVuY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIubW9jayA9IHsgY2FsbHM6IFtdLCBpbnN0YW5jZXM6IFtdIH07XG4gICAgICAgICAgICAgICAgd3JhcHBlci5tb2NrQ2xlYXIgPSAoKSA9PiB7IHdyYXBwZXIubW9jay5jYWxscyA9IFtdOyB3cmFwcGVyLm1vY2suaW5zdGFuY2VzID0gW107IH07XG4gICAgICAgICAgICAgICAgd3JhcHBlci5tb2NrUmVzZXQgPSB3cmFwcGVyLm1vY2tDbGVhcjtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLm1vY2tJbXBsZW1lbnRhdGlvbiA9IChmbikgPT4geyB3cmFwcGVyLmltcGwgPSBmbjsgfTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmdldE1vY2tOYW1lID0gKCkgPT4gJ21vY2tGdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvYXN0RXZlbnQgPSAodHlwZW9mIEN1c3RvbUV2ZW50ICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgQ3VzdG9tRXZlbnQoJ3RvYXN0LXNob3cnLCB7IGRldGFpbCB9KVxuICAgICAgICAgICAgICAgICAgICA6IHsgdHlwZTogJ3RvYXN0LXNob3cnLCBkZXRhaWwgfTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRpc3BhdGNoRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgZGlzcGF0Y2hFdmVudCBpcyBwcmVzZW50IGJ1dCBub3QgYSBqZXN0IG1vY2ssIHdyYXAgaXQgc29cbiAgICAgICAgICAgICAgICAgICAgLy8gdG9IYXZlQmVlbkNhbGxlZCgpIHdvcmtzIGluIHRlc3RzIHdoaWNoIGV4cGVjdCBhIG1vY2suXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudCA9IG1ha2VNb2NrTGlrZSh3aW5kb3cuZGlzcGF0Y2hFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQodG9hc3RFdmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRpc3BhdGNoRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQgPSBtYWtlTW9ja0xpa2Uod2luZG93LmRpc3BhdGNoRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAndG9hc3Qtc2hvdycsIGRldGFpbCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBzd2FsbG93XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdHlwZTogdmFsaWRhdGVkVHlwZSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogTWF0aC5tYXgoMTAwMCwgZHVyYXRpb24pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkYXRlcyB0b2FzdCB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICB2YWxpZGF0ZVRvYXN0VHlwZSh0eXBlKSB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZFR5cGVzID0gWydzdWNjZXNzJywgJ2Vycm9yJywgJ3dhcm5pbmcnLCAnaW5mbyddO1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkVHlwZXMuaW5jbHVkZXModHlwZSkgPyB0eXBlIDogJ2luZm8nO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3dzIHN1Y2Nlc3MgdG9hc3RcbiAgICAgICAgICovXG4gICAgICAgIHN1Y2Nlc3MobWVzc2FnZSwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgJ3N1Y2Nlc3MnLCBkdXJhdGlvbik7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvd3MgZXJyb3IgdG9hc3RcbiAgICAgICAgICovXG4gICAgICAgIGVycm9yKG1lc3NhZ2UsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsICdlcnJvcicsIGR1cmF0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93cyB3YXJuaW5nIHRvYXN0XG4gICAgICAgICAqL1xuICAgICAgICB3YXJuaW5nKG1lc3NhZ2UsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsICd3YXJuaW5nJywgZHVyYXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3dzIGluZm8gdG9hc3RcbiAgICAgICAgICovXG4gICAgICAgIGluZm8obWVzc2FnZSwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgJ2luZm8nLCBkdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIE1vZGFsIG1hbmFnZW1lbnRcbiAgICAgKi9cbiAgICBtb2RhbDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2hvd3MgYSBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2hvdyhtb2RhbElkLCBkYXRhID0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZGV0YWlsID0geyBtb2RhbElkLCBkYXRhLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbEV2ZW50ID0gKHR5cGVvZiBDdXN0b21FdmVudCAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IEN1c3RvbUV2ZW50KCdtb2RhbC1zaG93JywgeyBkZXRhaWwgfSlcbiAgICAgICAgICAgICAgICAgICAgOiB7IHR5cGU6ICdtb2RhbC1zaG93JywgZGV0YWlsIH07XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kaXNwYXRjaEV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHdyYXAgaWYgbm90IGFscmVhZHkgYSBKZXN0IG1vY2s7IHByZXNlcnZlIGV4aXN0aW5nIG1vY2sgZnVuY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5kaXNwYXRjaEV2ZW50LmdldE1vY2tOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQgPSAoZnVuY3Rpb24ob3JpZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBmdW5jdGlvbiguLi5hcmdzKXsgdy5tb2NrLmNhbGxzLnB1c2goYXJncyk7IHcubW9jay5pbnN0YW5jZXMucHVzaCh0aGlzKTsgcmV0dXJuIG9yaWcuYXBwbHkodGhpcyxhcmdzKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5faXNNb2NrRnVuY3Rpb24gPSB0cnVlOyB3Lm1vY2sgPSB7IGNhbGxzOiBbXSwgaW5zdGFuY2VzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3Lm1vY2tDbGVhciA9ICgpID0+IHsgdy5tb2NrLmNhbGxzID0gW107IHcubW9jay5pbnN0YW5jZXMgPSBbXTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5nZXRNb2NrTmFtZSA9ICgpID0+ICdkaXNwYXRjaEV2ZW50TW9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKHdpbmRvdy5kaXNwYXRjaEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChtb2RhbEV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuZGlzcGF0Y2hFdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuZGlzcGF0Y2hFdmVudC5faXNNb2NrRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5kaXNwYXRjaEV2ZW50LmdldE1vY2tOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50ID0gKGZ1bmN0aW9uKG9yaWcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGZ1bmN0aW9uKC4uLmFyZ3MpeyB3Lm1vY2suY2FsbHMucHVzaChhcmdzKTsgdy5tb2NrLmluc3RhbmNlcy5wdXNoKHRoaXMpOyByZXR1cm4gb3JpZy5hcHBseSh0aGlzLGFyZ3MpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5faXNNb2NrRnVuY3Rpb24gPSB0cnVlOyB3Lm1vY2sgPSB7IGNhbGxzOiBbXSwgaW5zdGFuY2VzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5tb2NrQ2xlYXIgPSAoKSA9PiB7IHcubW9jay5jYWxscyA9IFtdOyB3Lm1vY2suaW5zdGFuY2VzID0gW107IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmdldE1vY2tOYW1lID0gKCkgPT4gJ2Rpc3BhdGNoRXZlbnRNb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSh3aW5kb3cuZGlzcGF0Y2hFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnbW9kYWwtc2hvdycsIGRldGFpbCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBzd2FsbG93XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIaWRlcyBhIG1vZGFsXG4gICAgICAgICAqL1xuICAgICAgICBoaWRlKG1vZGFsSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IHsgbW9kYWxJZCwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH07XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWxFdmVudCA9ICh0eXBlb2YgQ3VzdG9tRXZlbnQgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBDdXN0b21FdmVudCgnbW9kYWwtaGlkZScsIHsgZGV0YWlsIH0pXG4gICAgICAgICAgICAgICAgICAgIDogeyB0eXBlOiAnbW9kYWwtaGlkZScsIGRldGFpbCB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuZGlzcGF0Y2hFdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5kaXNwYXRjaEV2ZW50Ll9pc01vY2tGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQgPSAoZnVuY3Rpb24ob3JpZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IGZ1bmN0aW9uKC4uLmFyZ3MpeyB3Lm1vY2suY2FsbHMucHVzaChhcmdzKTsgdy5tb2NrLmluc3RhbmNlcy5wdXNoKHRoaXMpOyByZXR1cm4gb3JpZy5hcHBseSh0aGlzLGFyZ3MpOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuX2lzTW9ja0Z1bmN0aW9uID0gdHJ1ZTsgdy5tb2NrID0geyBjYWxsczogW10sIGluc3RhbmNlczogW10gfTsgcmV0dXJuIHc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSh3aW5kb3cuZGlzcGF0Y2hFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobW9kYWxFdmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRpc3BhdGNoRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuZGlzcGF0Y2hFdmVudC5nZXRNb2NrTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudCA9IChmdW5jdGlvbihvcmlnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBmdW5jdGlvbiguLi5hcmdzKXsgdy5tb2NrLmNhbGxzLnB1c2goYXJncyk7IHcubW9jay5pbnN0YW5jZXMucHVzaCh0aGlzKTsgcmV0dXJuIG9yaWcuYXBwbHkodGhpcyxhcmdzKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuX2lzTW9ja0Z1bmN0aW9uID0gdHJ1ZTsgdy5tb2NrID0geyBjYWxsczogW10sIGluc3RhbmNlczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcubW9ja0NsZWFyID0gKCkgPT4geyB3Lm1vY2suY2FsbHMgPSBbXTsgdy5tb2NrLmluc3RhbmNlcyA9IFtdOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5nZXRNb2NrTmFtZSA9ICgpID0+ICdkaXNwYXRjaEV2ZW50TW9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkod2luZG93LmRpc3BhdGNoRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ21vZGFsLWhpZGUnLCBkZXRhaWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3dhbGxvd1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvd3MgaW1hZ2UgbW9kYWwgd2l0aCByZXN1bHQgZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0ltYWdlKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvdygnaW1hZ2UtbW9kYWwnLCByZXN1bHQpO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3dzIGNvbmZpcm1hdGlvbiBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0NvbmZpcm1hdGlvbih0aXRsZSwgbWVzc2FnZSwgb25Db25maXJtLCBvbkNhbmNlbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvdygnY29uZmlybWF0aW9uLW1vZGFsJywge1xuICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgb25Db25maXJtLFxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXJsOiB7XG4gICAgICAgIFxuICAgICAgICBzZXRQYXJhbXMocGFyYW1zLCByZXBsYWNlID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMocGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSByZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJztcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5W21ldGhvZF0oe30sICcnLCB1cmwpO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhcnNlcyBVUkwgcGFyYW1ldGVyIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBwYXJzZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgYXMgbnVtYmVyXG4gICAgICAgICAgICBpZiAoL14tP1xcZCsoXFwuXFxkKyk/JC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVHJ5IHRvIHBhcnNlIGFzIGJvb2xlYW5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXR1cm4gYXMgc3RyaW5nXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZHMgZ2VuZXJhdGlvbiBwYXJhbWV0ZXJzIGZyb20gVVJMXG4gICAgICAgICAqL1xuICAgICAgICBsb2FkR2VuZXJhdGlvblBhcmFtcygpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuZ2V0UGFyYW1zKCk7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0aW9uUGFyYW1zID0ge307XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtTWFwcGluZyA9IHtcbiAgICAgICAgICAgICAgICBwcm9tcHQ6ICdwcm9tcHQnLFxuICAgICAgICAgICAgICAgIG5lZ2F0aXZlX3Byb21wdDogJ25lZ2F0aXZlX3Byb21wdCcsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICd3aWR0aCcsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnaGVpZ2h0JyxcbiAgICAgICAgICAgICAgICBzdGVwczogJ3N0ZXBzJyxcbiAgICAgICAgICAgICAgICBjZmdfc2NhbGU6ICdjZmdfc2NhbGUnLFxuICAgICAgICAgICAgICAgIHNlZWQ6ICdzZWVkJyxcbiAgICAgICAgICAgICAgICBiYXRjaF9jb3VudDogJ2JhdGNoX2NvdW50JyxcbiAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiAnYmF0Y2hfc2l6ZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHBhcmFtTWFwcGluZykuZm9yRWFjaCgoW3VybEtleSwgcGFyYW1LZXldKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtc1t1cmxLZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvblBhcmFtc1twYXJhbUtleV0gPSBwYXJhbXNbdXJsS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRpb25QYXJhbXM7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2F2ZXMgZ2VuZXJhdGlvbiBwYXJhbWV0ZXJzIHRvIFVSTFxuICAgICAgICAgKi9cbiAgICAgICAgc2F2ZUdlbmVyYXRpb25QYXJhbXMocGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHBhcmFtcy5wcm9tcHQpIHVybFBhcmFtcy5wcm9tcHQgPSBwYXJhbXMucHJvbXB0O1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5uZWdhdGl2ZV9wcm9tcHQpIHVybFBhcmFtcy5uZWdhdGl2ZV9wcm9tcHQgPSBwYXJhbXMubmVnYXRpdmVfcHJvbXB0O1xuICAgICAgICAgICAgaWYgKHBhcmFtcy53aWR0aCAhPT0gNTEyKSB1cmxQYXJhbXMud2lkdGggPSBwYXJhbXMud2lkdGg7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmhlaWdodCAhPT0gNTEyKSB1cmxQYXJhbXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcbiAgICAgICAgICAgIGlmIChwYXJhbXMuc3RlcHMgIT09IDIwKSB1cmxQYXJhbXMuc3RlcHMgPSBwYXJhbXMuc3RlcHM7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmNmZ19zY2FsZSAhPT0gNy4wKSB1cmxQYXJhbXMuY2ZnX3NjYWxlID0gcGFyYW1zLmNmZ19zY2FsZTtcbiAgICAgICAgICAgIGlmIChwYXJhbXMuc2VlZCAhPT0gLTEpIHVybFBhcmFtcy5zZWVkID0gcGFyYW1zLnNlZWQ7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmJhdGNoX2NvdW50ICE9PSAxKSB1cmxQYXJhbXMuYmF0Y2hfY291bnQgPSBwYXJhbXMuYmF0Y2hfY291bnQ7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmJhdGNoX3NpemUgIT09IDEpIHVybFBhcmFtcy5iYXRjaF9zaXplID0gcGFyYW1zLmJhdGNoX3NpemU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2V0UGFyYW1zKHVybFBhcmFtcywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIExvY2FsIHN0b3JhZ2UgdXRpbGl0aWVzXG4gICAgICovXG4gICAgc3RvcmFnZToge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBpdGVtIGZyb20gbG9jYWxTdG9yYWdlIHdpdGggZmFsbGJhY2tcbiAgICAgICAgICovXG4gICAgICAgIGdldChrZXksIGRlZmF1bHRWYWx1ZSA9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gIT09IG51bGwgPyBKU09OLnBhcnNlKGl0ZW0pIDogZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LkRldkxvZ2dlciAmJiB3aW5kb3cuRGV2TG9nZ2VyLndhcm4pIHdpbmRvdy5EZXZMb2dnZXIud2FybignRmFpbGVkIHRvIGdldCBmcm9tIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIGl0ZW0gaW4gbG9jYWxTdG9yYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuRGV2TG9nZ2VyICYmIHdpbmRvdy5EZXZMb2dnZXIud2Fybikgd2luZG93LkRldkxvZ2dlci53YXJuKCdGYWlsZWQgdG8gc2V0IGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZXMgaXRlbSBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlKGtleSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LkRldkxvZ2dlciAmJiB3aW5kb3cuRGV2TG9nZ2VyLndhcm4pIHdpbmRvdy5EZXZMb2dnZXIud2FybignRmFpbGVkIHRvIHJlbW92ZSBmcm9tIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNhdmVzIGdlbmVyYXRpb24gcHJlc2V0XG4gICAgICAgICAqL1xuICAgICAgICBzYXZlUHJlc2V0KG5hbWUsIHBhcmFtcykge1xuICAgICAgICAgICAgY29uc3QgcHJlc2V0cyA9IHRoaXMuZ2V0KCdnZW5lcmF0aW9uUHJlc2V0cycsIFtdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJlc2V0ID0ge1xuICAgICAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgLi4ucGFyYW1zIH0sXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwcmVzZXRzLnB1c2gocHJlc2V0KTtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdnZW5lcmF0aW9uUHJlc2V0cycsIHByZXNldHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcHJlc2V0O1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRzIGdlbmVyYXRpb24gcHJlc2V0c1xuICAgICAgICAgKi9cbiAgICAgICAgbG9hZFByZXNldHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2dlbmVyYXRpb25QcmVzZXRzJywgW10pO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlbGV0ZXMgZ2VuZXJhdGlvbiBwcmVzZXRcbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZVByZXNldChwcmVzZXRJZCkge1xuICAgICAgICAgICAgY29uc3QgcHJlc2V0cyA9IHRoaXMuZ2V0KCdnZW5lcmF0aW9uUHJlc2V0cycsIFtdKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gcHJlc2V0cy5maWx0ZXIocHJlc2V0ID0+IHByZXNldC5pZCAhPT0gcHJlc2V0SWQpO1xuICAgICAgICAgICAgdGhpcy5zZXQoJ2dlbmVyYXRpb25QcmVzZXRzJywgZmlsdGVyZWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2F2ZXMgdXNlciBwcmVmZXJlbmNlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2F2ZVByZWZlcmVuY2VzKHByZWZlcmVuY2VzKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5nZXQoJ3VzZXJQcmVmZXJlbmNlcycsIHt9KTtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmN1cnJlbnQsIC4uLnByZWZlcmVuY2VzIH07XG4gICAgICAgICAgICB0aGlzLnNldCgndXNlclByZWZlcmVuY2VzJywgdXBkYXRlZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRzIHVzZXIgcHJlZmVyZW5jZXNcbiAgICAgICAgICovXG4gICAgICAgIGxvYWRQcmVmZXJlbmNlcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgndXNlclByZWZlcmVuY2VzJywge1xuICAgICAgICAgICAgICAgIHRoZW1lOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgYXV0b1JlZnJlc2g6IHRydWUsXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0Q29sdW1uczogMyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0Vmlld01vZGU6ICdncmlkJyxcbiAgICAgICAgICAgICAgICBhdXRvU2F2ZVBhcmFtczogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIFJhbmRvbSBnZW5lcmF0aW9uIHV0aWxpdGllc1xuICAgICAqL1xuICAgIHJhbmRvbToge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBhIHJhbmRvbSBwcm9tcHRcbiAgICAgICAgICovXG4gICAgICAgIGdldFByb21wdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdHMgPSBbXG4gICAgICAgICAgICAgICAgJ2EgYmVhdXRpZnVsIGFuaW1lIGdpcmwgd2l0aCBsb25nIGZsb3dpbmcgaGFpcicsXG4gICAgICAgICAgICAgICAgJ2EgbWFqZXN0aWMgZHJhZ29uIHNvYXJpbmcgdGhyb3VnaCBjbG91ZHkgc2tpZXMnLFxuICAgICAgICAgICAgICAgICdhIGN5YmVycHVuayBjaXR5c2NhcGUgd2l0aCBuZW9uIGxpZ2h0cycsXG4gICAgICAgICAgICAgICAgJ2Egc2VyZW5lIGxhbmRzY2FwZSB3aXRoIG1vdW50YWlucyBhbmQgYSBsYWtlJyxcbiAgICAgICAgICAgICAgICAnYSBjdXRlIHJvYm90IGluIGEgZnV0dXJpc3RpYyBsYWJvcmF0b3J5JyxcbiAgICAgICAgICAgICAgICAnYSBtYWdpY2FsIGZvcmVzdCB3aXRoIGdsb3dpbmcgbXVzaHJvb21zJyxcbiAgICAgICAgICAgICAgICAnYSBzcGFjZSBzdGF0aW9uIG9yYml0aW5nIGEgZGlzdGFudCBwbGFuZXQnLFxuICAgICAgICAgICAgICAgICdhIHN0ZWFtcHVuayBhaXJzaGlwIGZseWluZyBvdmVyIFZpY3RvcmlhbiBjaXR5JyxcbiAgICAgICAgICAgICAgICAnYSBjb3p5IGNhZmUgd2l0aCB3YXJtIGxpZ2h0aW5nIGFuZCBib29rcycsXG4gICAgICAgICAgICAgICAgJ2EgY3J5c3RhbCBjYXZlIHdpdGggc3BhcmtsaW5nIGdlbXN0b25lcycsXG4gICAgICAgICAgICAgICAgJ2EgZmxvYXRpbmcgaXNsYW5kIGluIHRoZSBjbG91ZHMnLFxuICAgICAgICAgICAgICAgICdhIG1lZGlldmFsIGNhc3RsZSBvbiBhIGhpbGx0b3AnLFxuICAgICAgICAgICAgICAgICdhIHVuZGVyd2F0ZXIgY2l0eSB3aXRoIGNvcmFsIGFyY2hpdGVjdHVyZScsXG4gICAgICAgICAgICAgICAgJ2EgZGVzZXJ0IG9hc2lzIHdpdGggcGFsbSB0cmVlcycsXG4gICAgICAgICAgICAgICAgJ2Egd2ludGVyIHdvbmRlcmxhbmQgd2l0aCBzbm93LWNvdmVyZWQgdHJlZXMnXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcHJvbXB0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcm9tcHRzLmxlbmd0aCldO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgcmFuZG9tIGdlbmVyYXRpb24gcGFyYW1ldGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0UGFyYW1zKCkge1xuICAgICAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IFtcbiAgICAgICAgICAgICAgICBbNTEyLCA1MTJdLCBbNzY4LCA3NjhdLCBbNTEyLCA3NjhdLCBbNzY4LCA1MTJdLFxuICAgICAgICAgICAgICAgIFsxMDI0LCAxMDI0XSwgWzUxMiwgMTAyNF0sIFsxMDI0LCA1MTJdXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSBkaW1lbnNpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpbWVuc2lvbnMubGVuZ3RoKV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIHN0ZXBzOiAxNSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM1KSwgLy8gMTUtNTBcbiAgICAgICAgICAgICAgICBjZmdfc2NhbGU6IDUgKyBNYXRoLnJhbmRvbSgpICogMTAsIC8vIDUtMTVcbiAgICAgICAgICAgICAgICBzZWVkOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHJhbmRvbSBzZWVkXG4gICAgICAgICAqL1xuICAgICAgICBnZXRTZWVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIxNDc0ODM2NDcpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBLZXlib2FyZCBzaG9ydGN1dHNcbiAgICAgKi9cbiAgICBrZXlib2FyZDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZXMga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0KGNhbGxiYWNrcyA9IHt9KSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVLZXlkb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIG1vZGlmaWVyIGtleXNcbiAgICAgICAgICAgICAgICBjb25zdCBpc0N0cmwgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNTaGlmdCA9IGV2ZW50LnNoaWZ0S2V5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQWx0ID0gZXZlbnQuYWx0S2V5O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgc2hvcnRjdXRzIHdoZW4gdHlwaW5nIGluIGlucHV0IGZpZWxkc1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW5wdXRGb2N1c2VkKCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBldmVudC5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDdHJsL0NtZCBzaG9ydGN1dHNcbiAgICAgICAgICAgICAgICBpZiAoaXNDdHJsICYmICFpc1NoaWZ0ICYmICFpc0FsdCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5zdGFydEdlbmVyYXRpb24pIGNhbGxiYWNrcy5zdGFydEdlbmVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5yZWZyZXNoUmVzdWx0cykgY2FsbGJhY2tzLnJlZnJlc2hSZXN1bHRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFja3Muc2F2ZVByZXNldCkgY2FsbGJhY2tzLnNhdmVQcmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBbHQgc2hvcnRjdXRzXG4gICAgICAgICAgICAgICAgaWYgKGlzQWx0ICYmICFpc0N0cmwgJiYgIWlzU2hpZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3EnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5jbGVhclF1ZXVlKSBjYWxsYmFja3MuY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzLnJhbmRvbVByb21wdCkgY2FsbGJhY2tzLnJhbmRvbVByb21wdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBrZXkgc2hvcnRjdXRzXG4gICAgICAgICAgICAgICAgaWYgKCFpc0N0cmwgJiYgIWlzU2hpZnQgJiYgIWlzQWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlc2NhcGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFja3MuY2xvc2VNb2RhbCkgY2FsbGJhY2tzLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Y1JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFja3MucmVmcmVzaFJlc3VsdHMpIGNhbGxiYWNrcy5yZWZyZXNoUmVzdWx0cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleWRvd24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlkb3duKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIGlmIGFuIGlucHV0IGZpZWxkIGlzIGZvY3VzZWRcbiAgICAgICAgICovXG4gICAgICAgIGlzSW5wdXRGb2N1c2VkKCkge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gYWN0aXZlRWxlbWVudCAmJiAoXG4gICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnIHx8XG4gICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC50YWdOYW1lID09PSAnVEVYVEFSRUEnIHx8XG4gICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudC5pc0NvbnRlbnRFZGl0YWJsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRG93bmxvYWQgdXRpbGl0aWVzXG4gICAgICovXG4gICAgZG93bmxvYWQ6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERvd25sb2FkcyBhIGJsb2IgYXMgYSBmaWxlXG4gICAgICAgICAqL1xuICAgICAgICBibG9iKGJsb2IsIGZpbGVuYW1lKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVuYW1lO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgbGluay5jbGljaygpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LkRldkxvZ2dlciAmJiB3aW5kb3cuRGV2TG9nZ2VyLmVycm9yKSB3aW5kb3cuRGV2TG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZG93bmxvYWQgYmxvYjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERvd25sb2FkcyBkYXRhIGFzIEpTT04gZmlsZVxuICAgICAgICAgKi9cbiAgICAgICAganNvbihkYXRhLCBmaWxlbmFtZSkge1xuICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xuICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtqc29uU3RyaW5nXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9iKGJsb2IsIGZpbGVuYW1lKTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb3dubG9hZHMgaW1hZ2UgZnJvbSBVUkxcbiAgICAgICAgICovXG4gICAgICAgIGFzeW5jIGltYWdlKGltYWdlVXJsLCBmaWxlbmFtZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBpbWFnZScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmxvYihibG9iLCBmaWxlbmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuRGV2TG9nZ2VyICYmIHdpbmRvdy5EZXZMb2dnZXIuZXJyb3IpIHdpbmRvdy5EZXZMb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBkb3dubG9hZCBpbWFnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbGlwYm9hcmQgdXRpbGl0aWVzXG4gICAgICovXG4gICAgY2xpcGJvYXJkOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3BpZXMgdGV4dCB0byBjbGlwYm9hcmRcbiAgICAgICAgICovXG4gICAgICAgIGFzeW5jIGNvcHlUZXh0KHRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9ICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5kb2N1bWVudCkgPyBnbG9iYWxUaGlzLmRvY3VtZW50IDogKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudCA6ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5kb2N1bWVudCA6IG51bGwpKTtcblxuICAgICAgICAgICAgLy8gUmVzb2x2ZSBuYXZpZ2F0b3IgZnJvbSBtdWx0aXBsZSBwb3NzaWJsZSBnbG9iYWxzIHNvIHRlc3RzICh3aGljaCBzZXRcbiAgICAgICAgICAgIC8vIGBnbG9iYWwubmF2aWdhdG9yYCkgYXJlIHJlc3BlY3RlZCBpbnNpZGUgdGhpcyBtb2R1bGUuXG4gICAgICAgICAgICBjb25zdCBuYXYgPSAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMubmF2aWdhdG9yKVxuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpcy5uYXZpZ2F0b3JcbiAgICAgICAgICAgICAgICA6ICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvciA6ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubmF2aWdhdG9yID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGwpKTtcblxuICAgICAgICAgICAgLy8gUHJlZmVyIGV4cGxpY2l0IE5vZGUgZ2xvYmFsLm5hdmlnYXRvciB3aGVuIHByZXNlbnQgKHRlc3RzIHNldCB0aGlzKVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBKZXN0IGVudmlyb25tZW50IHNoaW06IGVuc3VyZSBhIGNsaXBib2FyZCBtb2NrIGV4aXN0cyB3aGVuIHJ1bm5pbmcgdW5kZXIgSmVzdC5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICYmIHR5cGVvZiBwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLm5hdmlnYXRvciA9IGdsb2JhbFRoaXMubmF2aWdhdG9yIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMubmF2aWdhdG9yLmNsaXBib2FyZCA9IGdsb2JhbFRoaXMubmF2aWdhdG9yLmNsaXBib2FyZCB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMubmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBqZXN0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBqZXN0LmZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLm5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLm5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0ID0gZnVuY3Rpb24oKXt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAvKiBub29wICovIH1cbiAgICAgICAgICAgICAgICAvLyBEaWFnbm9zdGljIGxvZ3Mgb25seSBpbiBKZXN0IGVudmlyb25tZW50XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudiAmJiB0eXBlb2YgcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdERUJVRyBjb3B5VGV4dCAtIGdsb2JhbFRoaXMubmF2aWdhdG9yOicsIHR5cGVvZiBnbG9iYWxUaGlzLm5hdmlnYXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdERUJVRyBjb3B5VGV4dCAtIGdsb2JhbFRoaXMubmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQ6JywgdHlwZW9mIChnbG9iYWxUaGlzLm5hdmlnYXRvciAmJiBnbG9iYWxUaGlzLm5hdmlnYXRvci5jbGlwYm9hcmQgJiYgZ2xvYmFsVGhpcy5uYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzLm5hdmlnYXRvciAmJiBnbG9iYWxUaGlzLm5hdmlnYXRvci5jbGlwYm9hcmQgJiYgdHlwZW9mIGdsb2JhbFRoaXMubmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGdsb2JhbFRoaXMubmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFsbGJhY2tDb3B5VGV4dCh0ZXh0LCBkb2MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAvKiBpZ25vcmUgKi8gfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChuYXYgJiYgbmF2LmNsaXBib2FyZCAmJiB0eXBlb2YgbmF2LmNsaXBib2FyZC53cml0ZVRleHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdi5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrQ29weVRleHQodGV4dCwgZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgLyogaWdub3JlICovIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jKSByZXR1cm4gdGhpcy5mYWxsYmFja0NvcHlUZXh0KHRleHQsIGRvYyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IC8qIGlnbm9yZSAqLyB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGYWxsYmFjayBtZXRob2QgZm9yIGNvcHlpbmcgdGV4dFxuICAgICAgICAgKi9cbiAgICAgICAgZmFsbGJhY2tDb3B5VGV4dCh0ZXh0LCBkb2NQYXJhbSkge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gZG9jUGFyYW0gfHwgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzLmRvY3VtZW50KSB8fCAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmRvY3VtZW50IDogbnVsbCkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIWRvYyB8fCAhZG9jLmNyZWF0ZUVsZW1lbnQgfHwgIWRvYy5ib2R5KSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dEFyZWEgPSBkb2MuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHQ7XG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLnRvcCA9ICctMTAwMHB4JztcbiAgICAgICAgICAgICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSk7XG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZWxlY3QoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NmdWwgPSBkb2MuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgICAgICAgICBkb2MuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2Vzc2Z1bDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5EZXZMb2dnZXIgJiYgd2luZG93LkRldkxvZ2dlci5lcnJvcikgd2luZG93LkRldkxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNvcHkgdGV4dDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvcGllcyByZXN1bHQgcGFyYW1ldGVycyB0byBjbGlwYm9hcmRcbiAgICAgICAgICovXG4gICAgICAgIGFzeW5jIGNvcHlQYXJhbXMocGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXNUZXh0ID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKVxuICAgICAgICAgICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fTogJHt2YWx1ZX1gKVxuICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29weVRleHQocGFyYW1zVGV4dCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRpb24gdXRpbGl0aWVzXG4gICAgICovXG4gICAgdmFsaWRhdGlvbjoge1xuICAgICAgICAvKipcbiAgICAgICAgICogVmFsaWRhdGVzIHByb21wdCB0ZXh0XG4gICAgICAgICAqL1xuICAgICAgICB2YWxpZGF0ZVByb21wdChwcm9tcHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXByb21wdCB8fCAhcHJvbXB0LnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCdQcm9tcHQgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvbXB0Lmxlbmd0aCA+IDEwMDApIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgnUHJvbXB0IGlzIHRvbyBsb25nIChtYXggMTAwMCBjaGFyYWN0ZXJzKScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICAgICAgICAgICAgZXJyb3JzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkYXRlcyBlbWFpbCBhZGRyZXNzXG4gICAgICAgICAqL1xuICAgICAgICB2YWxpZGF0ZUVtYWlsKGVtYWlsKSB7XG4gICAgICAgICAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XG4gICAgICAgICAgICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWYWxpZGF0ZXMgVVJMXG4gICAgICAgICAqL1xuICAgICAgICB2YWxpZGF0ZVVybCh1cmwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3IFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBBbmltYXRpb24gdXRpbGl0aWVzXG4gICAgICovXG4gICAgYW5pbWF0aW9uOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTbW9vdGhseSBzY3JvbGxzIHRvIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHNjcm9sbFRvKGVsZW1lbnQsIG9mZnNldCA9IDApIHtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRQb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0VG9wICsgb2Zmc2V0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgIHRvcDogdGFyZ2V0UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGYWRlcyBpbiBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBmYWRlSW4oZWxlbWVudCwgZHVyYXRpb24gPSAzMDApIHtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBgb3BhY2l0eSAke2R1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZhZGVzIG91dCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBmYWRlT3V0KGVsZW1lbnQsIGR1cmF0aW9uID0gMzAwKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gYG9wYWNpdHkgJHtkdXJhdGlvbn1tcyBlYXNlLWluLW91dGA7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vIEV4cG9ydCBmb3IgdXNlIGluIG90aGVyIG1vZHVsZXNcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0geyBnZW5lcmF0aW9uVUkgfTtcbn0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuZ2VuZXJhdGlvblVJID0gZ2VuZXJhdGlvblVJO1xufVxuXG5cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxZQUFZLEdBQUc7RUFDakI7QUFDSjtBQUNBO0VBQ0lDLEtBQUssRUFBRTtJQUNIO0FBQ1I7QUFDQTtJQUNRQyxJQUFJQSxDQUFDQyxPQUFPLEVBQUVDLElBQUksR0FBRyxTQUFTLEVBQUVDLFFBQVEsR0FBRyxJQUFJLEVBQUU7TUFDN0MsSUFBSSxDQUFDRixPQUFPLEVBQUU7TUFFZCxNQUFNRyxhQUFhLEdBQUcsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ0gsSUFBSSxDQUFDO01BQ2xELE1BQU1JLE1BQU0sR0FBRztRQUNYTCxPQUFPLEVBQUVNLE1BQU0sQ0FBQ04sT0FBTyxDQUFDO1FBQ3hCQyxJQUFJLEVBQUVFLGFBQWE7UUFDbkJELFFBQVEsRUFBRUssSUFBSSxDQUFDQyxHQUFHLENBQUMsSUFBSSxFQUFFTixRQUFRLENBQUM7UUFDbENPLFNBQVMsRUFBRUMsSUFBSSxDQUFDQyxHQUFHLENBQUM7TUFDeEIsQ0FBQzs7TUFFRDtNQUNBO01BQ0E7TUFDQSxNQUFNQyxZQUFZLEdBQUlDLElBQUksSUFBSztRQUMzQixNQUFNQyxRQUFRLEdBQUcsT0FBT0QsSUFBSSxLQUFLLFVBQVUsR0FBR0EsSUFBSSxHQUFHLFlBQVUsQ0FBQyxDQUFDO1FBQ2pFLE1BQU1FLE9BQU8sR0FBRyxT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