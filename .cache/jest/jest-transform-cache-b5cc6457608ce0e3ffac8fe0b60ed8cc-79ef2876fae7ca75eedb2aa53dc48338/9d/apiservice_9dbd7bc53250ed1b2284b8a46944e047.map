{"version":3,"names":["cov_1bz0evk1oo","actualCoverage","APIService","constructor","baseURL","b","f","s","defaultHeaders","request","endpoint","options","url","headers","apiKey","localStorage","getItem","config","response","fetch","ok","Error","status","statusText","contentType","get","includes","json","text","error","window","DevLogger","params","queryString","URLSearchParams","toString","method","post","data","body","JSON","stringify","put","delete","getAdapters","getAdapterTags","getDashboardStats","getResults","updateResultRating","resultId","rating","toggleResultFavorite","isFavorite","is_favorite","deleteResult","bulkDeleteResults","ids","bulkFavoriteResults","exportResults","computeEmbeddings","loraIds","forceRecompute","lora_ids","force_recompute","rebuildIndex","getActiveJobs"],"sources":["api-service.js"],"sourcesContent":["/**\n * Centralized API Service\n * Handles all HTTP requests with consistent error handling and response formatting\n */\n\nclass APIService {\n    constructor(baseURL = '') {\n        this.baseURL = baseURL;\n        this.defaultHeaders = {\n            'Content-Type': 'application/json'\n        };\n    }\n\n    /**\n     * Generic request method with error handling\n     */\n    async request(endpoint, options = {}) {\n        const url = `${this.baseURL}${endpoint}`;\n        \n        // Add API key if available\n        const headers = { ...this.defaultHeaders };\n        const apiKey = localStorage.getItem('lora_manager_api_key');\n        if (apiKey) {\n            headers['X-API-Key'] = apiKey;\n        }\n        \n        const config = {\n            headers: { ...headers, ...options.headers },\n            ...options\n        };\n\n        try {\n            const response = await fetch(url, config);\n            \n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            // Handle different content types\n            const contentType = response.headers.get('content-type');\n            if (contentType?.includes('application/json')) {\n                return await response.json();\n            } else if (contentType?.includes('text/')) {\n                return await response.text();\n            } else {\n                return response;\n            }\n        } catch (error) {\n            window.DevLogger?.error?.('API Request failed:', { url, error });\n            throw error;\n        }\n    }\n\n    // Convenience methods\n    async get(endpoint, params = {}) {\n        const queryString = new URLSearchParams(params).toString();\n        const url = queryString ? `${endpoint}?${queryString}` : endpoint;\n        return this.request(url, { method: 'GET' });\n    }\n\n    async post(endpoint, data = {}) {\n        return this.request(endpoint, {\n            method: 'POST',\n            body: JSON.stringify(data)\n        });\n    }\n\n    async put(endpoint, data = {}) {\n        return this.request(endpoint, {\n            method: 'PUT',\n            body: JSON.stringify(data)\n        });\n    }\n\n    async delete(endpoint) {\n        return this.request(endpoint, { method: 'DELETE' });\n    }\n\n    // Specific API endpoints\n    async getAdapters(params = {}) {\n        return this.get('/api/v1/adapters', params);\n    }\n\n    async getAdapterTags() {\n        return this.get('/api/v1/adapters/tags');\n    }\n\n    async getDashboardStats() {\n        return this.get('/api/dashboard/stats');\n    }\n\n    async getResults(params = {}) {\n        return this.get('/api/v1/results', params);\n    }\n\n    async updateResultRating(resultId, rating) {\n        return this.put(`/api/v1/results/${resultId}/rating`, { rating });\n    }\n\n    async toggleResultFavorite(resultId, isFavorite) {\n        return this.put(`/api/v1/results/${resultId}/favorite`, { is_favorite: isFavorite });\n    }\n\n    async deleteResult(resultId) {\n        return this.delete(`/api/v1/results/${resultId}`);\n    }\n\n    async bulkDeleteResults(ids) {\n        return this.request('/api/v1/results/bulk-delete', {\n            method: 'DELETE',\n            body: JSON.stringify({ ids })\n        });\n    }\n\n    async bulkFavoriteResults(ids, isFavorite = true) {\n        return this.put('/api/v1/results/bulk-favorite', { \n            ids, \n            is_favorite: isFavorite \n        });\n    }\n\n    async exportResults(ids) {\n        return this.request('/api/v1/results/export', {\n            method: 'POST',\n            body: JSON.stringify({ ids })\n        });\n    }\n\n    async computeEmbeddings(loraIds, forceRecompute = false) {\n        return this.post('/api/v1/recommendations/embeddings/compute', {\n            lora_ids: loraIds,\n            force_recompute: forceRecompute\n        });\n    }\n\n    async rebuildIndex() {\n        return this.post('/api/v1/recommendations/index/rebuild');\n    }\n\n    async getActiveJobs(status = 'processing') {\n        return this.get('/api/v1/deliveries/jobs', { status });\n    }\n}\n\n// Export singleton instance\nwindow.APIService = new APIService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;;AAEA,MAAME,UAAU,CAAC;EACbC,WAAWA,CAACC,OAAO;EAAA;EAAA,CAAAJ,cAAA,GAAAK,CAAA,UAAG,EAAE,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACtB,IAAI,CAACH,OAAO,GAAGA,OAAO;IAAC;IAAAJ,cAAA,GAAAO,CAAA;IACvB,IAAI,CAACC,cAAc,GAAG;MAClB,cAAc,EAAE;IACpB,CAAC;EACL;;EAEA;AACJ;AACA;EACI,MAAMC,OAAOA,CAACC,QAAQ,EAAEC,OAAO;EAAA;EAAA,CAAAX,cAAA,GAAAK,CAAA,UAAG,CAAC,CAAC,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAClC,MAAMM,GAAG;IAAA;IAAA,CAAAZ,cAAA,GAAAO,CAAA,OAAG,GAAG,IAAI,CAACH,OAAO,GAAGM,QAAQ,EAAE;;IAExC;IACA,MAAMG,OAAO;IAAA;IAAA,CAAAb,cAAA,GAAAO,CAAA,OAAG;MAAE,GAAG,IAAI,CAACC;IAAe,CAAC;IAC1C,MAAMM,MAAM;IAAA;IAAA,CAAAd,cAAA,GAAAO,CAAA,OAAGQ,YAAY,CAACC,OAAO,CAAC,sBAAsB,CAAC;IAAC;IAAAhB,cAAA,GAAAO,CAAA;IAC5D,IAAIO,MAAM,EAAE;MAAA;MAAAd,cAAA,GAAAK,CAAA;MAAAL,cAAA,GAAAO,CAAA;MACRM,OAAO,CAAC,WAAW,CAAC,GAAGC,MAAM;IACjC,CAAC;IAAA;IAAA;MAAAd,cAAA,GAAAK,CAAA;IAAA;IAED,MAAMY,MAAM;IAAA;IAAA,CAAAjB,cAAA,GAAAO,CAAA,OAAG;MACXM,OAAO,EAAE;QAAE,GAAGA,OAAO;QAAE,GAAGF,OAAO,CAACE;MAAQ,CAAC;MAC3C,GAAGF;IACP,CAAC;IAAC;IAAAX,cAAA,GAAAO,CAAA;IAEF,IAAI;MACA,MAAMW,QAAQ;MAAA;MAAA,CAAAlB,cAAA,GAAAO,CAAA,OAAG,MAAMY,KAAK,CAACP,GAAG,EAAEK,MAAM,CAAC;MAAC;MAAAjB,cAAA,GAAAO,CAAA;MAE1C,IAAI,CAACW,QAAQ,CAACE,EAAE,EAAE;QAAA;QAAApB,cAAA,GAAAK,CAAA;QAAAL,cAAA,GAAAO,CAAA;QACd,MAAM,IAAIc,KAAK,CAAC,QAAQH,QAAQ,CAACI,MAAM,KAAKJ,QAAQ,CAACK,UAAU,EAAE,CAAC;MACtE,CAAC;MAAA;MAAA;QAAAvB,cAAA,GAAAK,CAAA;MAAA;;MAED;MACA,MAAMmB,WAAW;MAAA;MAAA,CAAAxB,cAAA,GAAAO,CAAA,QAAGW,QAAQ,CAACL,OAAO,CAACY,GAAG,CAAC,cAAc,CAAC;MAAC;MAAAzB,cAAA,GAAAO,CAAA;MACzD,IAAIiB,WAAW,EAAEE,QAAQ,CAAC,kBAAkB,CAAC,EAAE;QAAA;QAAA1B,cAAA,GAAAK,CAAA;QAAAL,cAAA,GAAAO,CAAA;QAC3C,OAAO,MAAMW,QAAQ,CAACS,IAAI,CAAC,CAAC;MAChC,CAAC,MAAM;QAAA;QAAA3B,cAAA,GAAAK,CAAA;QAAAL,cAAA,GAAAO,CAAA;QAAA,IAAIiB,WAAW,EAAEE,QAAQ,CAAC,OAAO,CAAC,EAAE;UAAA;UAAA1B,cAAA,GAAAK,CAAA;UAAAL,cAAA,GAAAO,CAAA;UACvC,OAAO,MAAMW,QAAQ,CAACU,IAAI,CAAC,CAAC;QAChC,CAAC,MAAM;UAAA;UAAA5B,cAAA,GAAAK,CAAA;UAAAL,cAAA,GAAAO,CAAA;UACH,OAAOW,QAAQ;QACnB;MAAA;IACJ,CAAC,CAAC,OAAOW,KAAK,EAAE;MAAA;MAAA7B,cAAA,GAAAO,CAAA;MACZuB,MAAM,CAACC,SAAS,EAAEF,KAAK,GAAG,qBAAqB,EAAE;QAAEjB,GAAG;QAAEiB;MAAM,CAAC,CAAC;MAAC;MAAA7B,cAAA,GAAAO,CAAA;MACjE,MAAMsB,KAAK;IACf;EACJ;;EAEA;EACA,MAAMJ,GAAGA,CAACf,QAAQ,EAAEsB,MAAM;EAAA;EAAA,CAAAhC,cAAA,GAAAK,CAAA,UAAG,CAAC,CAAC,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAC7B,MAAM2B,WAAW;IAAA;IAAA,CAAAjC,cAAA,GAAAO,CAAA,QAAG,IAAI2B,eAAe,CAACF,MAAM,CAAC,CAACG,QAAQ,CAAC,CAAC;IAC1D,MAAMvB,GAAG;IAAA;IAAA,CAAAZ,cAAA,GAAAO,CAAA,QAAG0B,WAAW;IAAA;IAAA,CAAAjC,cAAA,GAAAK,CAAA,UAAG,GAAGK,QAAQ,IAAIuB,WAAW,EAAE;IAAA;IAAA,CAAAjC,cAAA,GAAAK,CAAA,UAAGK,QAAQ;IAAC;IAAAV,cAAA,GAAAO,CAAA;IAClE,OAAO,IAAI,CAACE,OAAO,CAACG,GAAG,EAAE;MAAEwB,MAAM,EAAE;IAAM,CAAC,CAAC;EAC/C;EAEA,MAAMC,IAAIA,CAAC3B,QAAQ,EAAE4B,IAAI;EAAA;EAAA,CAAAtC,cAAA,GAAAK,CAAA,UAAG,CAAC,CAAC,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IAC5B,OAAO,IAAI,CAACE,OAAO,CAACC,QAAQ,EAAE;MAC1B0B,MAAM,EAAE,MAAM;MACdG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;IAC7B,CAAC,CAAC;EACN;EAEA,MAAMI,GAAGA,CAAChC,QAAQ,EAAE4B,IAAI;EAAA;EAAA,CAAAtC,cAAA,GAAAK,CAAA,UAAG,CAAC,CAAC,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IAC3B,OAAO,IAAI,CAACE,OAAO,CAACC,QAAQ,EAAE;MAC1B0B,MAAM,EAAE,KAAK;MACbG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;IAC7B,CAAC,CAAC;EACN;EAEA,MAAMK,MAAMA,CAACjC,QAAQ,EAAE;IAAA;IAAAV,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACnB,OAAO,IAAI,CAACE,OAAO,CAACC,QAAQ,EAAE;MAAE0B,MAAM,EAAE;IAAS,CAAC,CAAC;EACvD;;EAEA;EACA,MAAMQ,WAAWA,CAACZ,MAAM;EAAA;EAAA,CAAAhC,cAAA,GAAAK,CAAA,WAAG,CAAC,CAAC,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IAC3B,OAAO,IAAI,CAACkB,GAAG,CAAC,kBAAkB,EAAEO,MAAM,CAAC;EAC/C;EAEA,MAAMa,cAAcA,CAAA,EAAG;IAAA;IAAA7C,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACnB,OAAO,IAAI,CAACkB,GAAG,CAAC,uBAAuB,CAAC;EAC5C;EAEA,MAAMqB,iBAAiBA,CAAA,EAAG;IAAA;IAAA9C,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACtB,OAAO,IAAI,CAACkB,GAAG,CAAC,sBAAsB,CAAC;EAC3C;EAEA,MAAMsB,UAAUA,CAACf,MAAM;EAAA;EAAA,CAAAhC,cAAA,GAAAK,CAAA,WAAG,CAAC,CAAC,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IAC1B,OAAO,IAAI,CAACkB,GAAG,CAAC,iBAAiB,EAAEO,MAAM,CAAC;EAC9C;EAEA,MAAMgB,kBAAkBA,CAACC,QAAQ,EAAEC,MAAM,EAAE;IAAA;IAAAlD,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACvC,OAAO,IAAI,CAACmC,GAAG,CAAC,mBAAmBO,QAAQ,SAAS,EAAE;MAAEC;IAAO,CAAC,CAAC;EACrE;EAEA,MAAMC,oBAAoBA,CAACF,QAAQ,EAAEG,UAAU,EAAE;IAAA;IAAApD,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IAC7C,OAAO,IAAI,CAACmC,GAAG,CAAC,mBAAmBO,QAAQ,WAAW,EAAE;MAAEI,WAAW,EAAED;IAAW,CAAC,CAAC;EACxF;EAEA,MAAME,YAAYA,CAACL,QAAQ,EAAE;IAAA;IAAAjD,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACzB,OAAO,IAAI,CAACoC,MAAM,CAAC,mBAAmBM,QAAQ,EAAE,CAAC;EACrD;EAEA,MAAMM,iBAAiBA,CAACC,GAAG,EAAE;IAAA;IAAAxD,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACzB,OAAO,IAAI,CAACE,OAAO,CAAC,6BAA6B,EAAE;MAC/C2B,MAAM,EAAE,QAAQ;MAChBG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEe;MAAI,CAAC;IAChC,CAAC,CAAC;EACN;EAEA,MAAMC,mBAAmBA,CAACD,GAAG,EAAEJ,UAAU;EAAA;EAAA,CAAApD,cAAA,GAAAK,CAAA,WAAG,IAAI,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IAC9C,OAAO,IAAI,CAACmC,GAAG,CAAC,+BAA+B,EAAE;MAC7Cc,GAAG;MACHH,WAAW,EAAED;IACjB,CAAC,CAAC;EACN;EAEA,MAAMM,aAAaA,CAACF,GAAG,EAAE;IAAA;IAAAxD,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACrB,OAAO,IAAI,CAACE,OAAO,CAAC,wBAAwB,EAAE;MAC1C2B,MAAM,EAAE,MAAM;MACdG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEe;MAAI,CAAC;IAChC,CAAC,CAAC;EACN;EAEA,MAAMG,iBAAiBA,CAACC,OAAO,EAAEC,cAAc;EAAA;EAAA,CAAA7D,cAAA,GAAAK,CAAA,WAAG,KAAK,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACrD,OAAO,IAAI,CAAC8B,IAAI,CAAC,4CAA4C,EAAE;MAC3DyB,QAAQ,EAAEF,OAAO;MACjBG,eAAe,EAAEF;IACrB,CAAC,CAAC;EACN;EAEA,MAAMG,YAAYA,CAAA,EAAG;IAAA;IAAAhE,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACjB,OAAO,IAAI,CAAC8B,IAAI,CAAC,uCAAuC,CAAC;EAC7D;EAEA,MAAM4B,aAAaA,CAAC3C,MAAM;EAAA;EAAA,CAAAtB,cAAA,GAAAK,CAAA,WAAG,YAAY,GAAE;IAAA;IAAAL,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAO,CAAA;IACvC,OAAO,IAAI,CAACkB,GAAG,CAAC,yBAAyB,EAAE;MAAEH;IAAO,CAAC,CAAC;EAC1D;AACJ;;AAEA;AAAA;AAAAtB,cAAA,GAAAO,CAAA;AACAuB,MAAM,CAAC5B,UAAU,GAAG,IAAIA,UAAU,CAAC,CAAC","ignoreList":[]}