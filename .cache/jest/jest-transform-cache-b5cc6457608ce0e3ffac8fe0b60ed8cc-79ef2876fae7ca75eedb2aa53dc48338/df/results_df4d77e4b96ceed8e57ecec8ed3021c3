9b1b9f7ff26f882725a2b04dc236ab46
/**
 * Generation Studio - Results Management Module
 * 
 * Handles result display, management, and interaction operations.
 */

/**
 * Results management for generation studio
 */
const generationResults = {
  /**
   * Formats a result for display
   */
  formatResult(result) {
    if (!result) return null;
    return {
      id: result.id,
      job_id: result.job_id,
      prompt: result.prompt || '',
      negative_prompt: result.negative_prompt || '',
      image_url: result.image_url,
      thumbnail_url: result.thumbnail_url || result.image_url,
      width: result.width || 512,
      height: result.height || 512,
      steps: result.steps || 20,
      cfg_scale: result.cfg_scale || 7.0,
      seed: result.seed || -1,
      batch_count: result.batch_count || 1,
      batch_size: result.batch_size || 1,
      created_at: result.created_at,
      file_size: result.file_size || 0,
      generation_time: result.generation_time || 0,
      model_used: result.model_used || 'Unknown',
      user_id: result.user_id,
      rating: result.rating || 0,
      tags: Array.isArray(result.tags) ? result.tags : [],
      metadata: result.metadata || {}
    };
  },
  /**
   * Formats file size for display
   */
  formatFileSize(bytes) {
    if (!bytes || bytes === 0) return '—';
    const units = ['B', 'KB', 'MB', 'GB'];
    const threshold = 1024;
    let size = bytes;
    let unitIndex = 0;
    while (size >= threshold && unitIndex < units.length - 1) {
      size /= threshold;
      unitIndex++;
    }
    return `${size.toFixed(unitIndex === 0 ? 0 : 1)} ${units[unitIndex]}`;
  },
  /**
   * Formats generation time for display
   */
  formatGenerationTime(seconds) {
    if (!seconds || seconds <= 0) return '—';
    if (seconds < 60) {
      return `${seconds.toFixed(1)}s`;
    } else if (seconds < 3600) {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = Math.round(seconds % 60);
      return `${minutes}m ${remainingSeconds}s`;
    } else {
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor(seconds % 3600 / 60);
      return `${hours}h ${minutes}m`;
    }
  },
  /**
   * Formats date for display
   */
  formatDate(dateString) {
    if (!dateString) return '—';
    try {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffHours = diffMs / (1000 * 60 * 60);
      if (diffHours < 1) {
        const diffMinutes = Math.floor(diffMs / (1000 * 60));
        return `${diffMinutes}m ago`;
      } else if (diffHours < 24) {
        return `${Math.floor(diffHours)}h ago`;
      } else if (diffHours < 72) {
        const diffDays = Math.floor(diffHours / 24);
        return `${diffDays}d ago`;
      } else {
        return date.toLocaleDateString();
      }
    } catch (error) {
      return '—';
    }
  },
  /**
   * Gets aspect ratio for result
   */
  getAspectRatio(result) {
    if (!result || !result.width || !result.height) {
      return 'Unknown';
    }
    const gcd = (a, b) => b === 0 ? a : gcd(b, a % b);
    const divisor = gcd(result.width, result.height);
    const widthRatio = result.width / divisor;
    const heightRatio = result.height / divisor;

    // Common aspect ratios
    const commonRatios = {
      '1:1': [1, 1],
      '4:3': [4, 3],
      '3:2': [3, 2],
      '16:9': [16, 9],
      '9:16': [9, 16],
      '2:3': [2, 3],
      '3:4': [3, 4]
    };
    for (const [ratio, [w, h]] of Object.entries(commonRatios)) {
      if (widthRatio === w && heightRatio === h) {
        return ratio;
      }
    }
    return `${widthRatio}:${heightRatio}`;
  },
  /**
   * Gets resolution category
   */
  getResolutionCategory(result) {
    if (!result || !result.width || !result.height) {
      return 'Unknown';
    }
    const pixels = result.width * result.height;
    if (pixels <= 512 * 512) {
      return 'Low (≤512²)';
    } else if (pixels <= 768 * 768) {
      return 'Medium (≤768²)';
    } else if (pixels <= 1024 * 1024) {
      return 'High (≤1024²)';
    } else {
      return 'Ultra (>1024²)';
    }
  },
  /**
   * Creates parameters object from result for reuse
   */
  extractParameters(result) {
    if (!result) return null;
    return {
      prompt: result.prompt || '',
      negative_prompt: result.negative_prompt || '',
      width: result.width || 512,
      height: result.height || 512,
      steps: result.steps || 20,
      cfg_scale: result.cfg_scale || 7.0,
      seed: result.seed || -1,
      batch_count: result.batch_count || 1,
      batch_size: result.batch_size || 1,
      sampler: result.metadata?.sampler,
      scheduler: result.metadata?.scheduler,
      model: result.model_used
    };
  },
  /**
   * Validates result data
   */
  validateResult(result) {
    const errors = [];
    if (!result) {
      errors.push('Result is null or undefined');
      return {
        isValid: false,
        errors
      };
    }
    if (!result.id) {
      errors.push('Result ID is missing');
    }
    if (!result.image_url) {
      errors.push('Image URL is missing');
    }
    if (!result.prompt) {
      errors.push('Prompt is missing');
    }
    if (!result.width || !result.height) {
      errors.push('Dimensions are missing');
    }
    if (!result.created_at) {
      errors.push('Creation date is missing');
    }
    return {
      isValid: errors.length === 0,
      errors
    };
  },
  /**
   * Filters results based on criteria
   */
  filterResults(results, filters = {}) {
    if (!Array.isArray(results)) return [];
    return results.filter(result => {
      // Search text filter
      if (filters.search) {
        const searchText = filters.search.toLowerCase();
        const prompt = (result.prompt || '').toLowerCase();
        const tags = (result.tags || []).join(' ').toLowerCase();
        if (!prompt.includes(searchText) && !tags.includes(searchText)) {
          return false;
        }
      }

      // Rating filter
      if (filters.minRating && result.rating < filters.minRating) {
        return false;
      }

      // Resolution filter
      if (filters.resolution) {
        const category = this.getResolutionCategory(result);
        if (category !== filters.resolution) {
          return false;
        }
      }

      // Aspect ratio filter
      if (filters.aspectRatio) {
        const ratio = this.getAspectRatio(result);
        if (ratio !== filters.aspectRatio) {
          return false;
        }
      }

      // Model filter
      if (filters.model && result.model_used !== filters.model) {
        return false;
      }

      // Date range filter
      if (filters.dateFrom || filters.dateTo) {
        const resultDate = new Date(result.created_at);
        if (filters.dateFrom && resultDate < new Date(filters.dateFrom)) {
          return false;
        }
        if (filters.dateTo && resultDate > new Date(filters.dateTo)) {
          return false;
        }
      }

      // Tags filter
      if (filters.tags && filters.tags.length > 0) {
        const resultTags = result.tags || [];
        const hasMatchingTag = filters.tags.some(tag => resultTags.some(resultTag => resultTag.toLowerCase().includes(tag.toLowerCase())));
        if (!hasMatchingTag) {
          return false;
        }
      }
      return true;
    });
  },
  /**
   * Sorts results based on criteria
   */
  sortResults(results, sortBy = 'created_at', sortOrder = 'desc') {
    if (!Array.isArray(results)) return [];
    const sortedResults = [...results];
    sortedResults.sort((a, b) => {
      let valueA, valueB;
      switch (sortBy) {
        case 'created_at':
          valueA = new Date(a.created_at || 0);
          valueB = new Date(b.created_at || 0);
          break;
        case 'rating':
          valueA = a.rating || 0;
          valueB = b.rating || 0;
          break;
        case 'generation_time':
          valueA = a.generation_time || 0;
          valueB = b.generation_time || 0;
          break;
        case 'file_size':
          valueA = a.file_size || 0;
          valueB = b.file_size || 0;
          break;
        case 'resolution':
          valueA = (a.width || 0) * (a.height || 0);
          valueB = (b.width || 0) * (b.height || 0);
          break;
        case 'steps':
          valueA = a.steps || 0;
          valueB = b.steps || 0;
          break;
        case 'cfg_scale':
          valueA = a.cfg_scale || 0;
          valueB = b.cfg_scale || 0;
          break;
        default:
          valueA = a[sortBy] || '';
          valueB = b[sortBy] || '';
      }
      if (valueA < valueB) return sortOrder === 'asc' ? -1 : 1;
      if (valueA > valueB) return sortOrder === 'asc' ? 1 : -1;
      return 0;
    });
    return sortedResults;
  },
  /**
   * Gets unique values for filtering
   */
  getUniqueValues(results, field) {
    if (!Array.isArray(results)) return [];
    const values = new Set();
    results.forEach(result => {
      let value;
      switch (field) {
        case 'model':
          value = result.model_used;
          break;
        case 'resolution':
          value = this.getResolutionCategory(result);
          break;
        case 'aspectRatio':
          value = this.getAspectRatio(result);
          break;
        case 'tags':
          if (Array.isArray(result.tags)) {
            result.tags.forEach(tag => values.add(tag));
          }
          return;
        default:
          value = result[field];
      }
      if (value && value !== 'Unknown') {
        values.add(value);
      }
    });
    return Array.from(values).sort();
  },
  /**
   * Creates gallery layout configuration
   */
  createGalleryLayout(results, viewMode = 'grid', columns = 3) {
    if (!Array.isArray(results)) return {
      items: [],
      layout: {}
    };
    const layout = {
      viewMode,
      columns,
      itemsPerPage: viewMode === 'grid' ? columns * 4 : 10,
      aspectRatio: '1:1'
    };
    const items = results.map((result, index) => {
      const formatted = this.formatResult(result);
      return {
        ...formatted,
        index,
        displayText: this.createDisplayText(formatted, viewMode),
        thumbnailUrl: formatted.thumbnail_url || formatted.image_url,
        aspectRatio: this.getAspectRatio(formatted)
      };
    });
    return {
      items,
      layout
    };
  },
  /**
   * Creates display text for result
   */
  createDisplayText(result, viewMode) {
    if (viewMode === 'list') {
      return {
        title: this.truncateText(result.prompt, 50),
        subtitle: `${result.width}×${result.height} • ${this.formatDate(result.created_at)}`,
        details: `${result.steps} steps • CFG ${result.cfg_scale} • ${this.formatGenerationTime(result.generation_time)}`
      };
    }
    return {
      title: this.truncateText(result.prompt, 30),
      subtitle: `${result.width}×${result.height}`
    };
  },
  /**
   * Truncates text to specified length
   */
  truncateText(text, maxLength) {
    if (!text || text.length <= maxLength) return text;
    return text.substring(0, maxLength - 3) + '...';
  },
  /**
   * Creates result statistics
   */
  getResultStatistics(results) {
    if (!Array.isArray(results) || results.length === 0) {
      return {
        total: 0,
        averageRating: 0,
        averageGenerationTime: 0,
        totalFileSize: 0,
        resolutionDistribution: {},
        modelDistribution: {},
        aspectRatioDistribution: {}
      };
    }
    const stats = {
      total: results.length,
      averageRating: 0,
      averageGenerationTime: 0,
      totalFileSize: 0,
      resolutionDistribution: {},
      modelDistribution: {},
      aspectRatioDistribution: {}
    };
    let totalRating = 0;
    let totalGenerationTime = 0;
    let ratedResults = 0;
    let timedResults = 0;
    results.forEach(result => {
      // Rating statistics
      if (result.rating && result.rating > 0) {
        totalRating += result.rating;
        ratedResults++;
      }

      // Generation time statistics
      if (result.generation_time && result.generation_time > 0) {
        totalGenerationTime += result.generation_time;
        timedResults++;
      }

      // File size
      if (result.file_size) {
        stats.totalFileSize += result.file_size;
      }

      // Resolution distribution
      const resolution = this.getResolutionCategory(result);
      stats.resolutionDistribution[resolution] = (stats.resolutionDistribution[resolution] || 0) + 1;

      // Model distribution
      const model = result.model_used || 'Unknown';
      stats.modelDistribution[model] = (stats.modelDistribution[model] || 0) + 1;

      // Aspect ratio distribution
      const aspectRatio = this.getAspectRatio(result);
      stats.aspectRatioDistribution[aspectRatio] = (stats.aspectRatioDistribution[aspectRatio] || 0) + 1;
    });
    if (ratedResults > 0) {
      stats.averageRating = totalRating / ratedResults;
    }
    if (timedResults > 0) {
      stats.averageGenerationTime = totalGenerationTime / timedResults;
    }
    return stats;
  }
};

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    generationResults
  };
} else if (typeof window !== 'undefined') {
  window.generationResults = generationResults;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0aW9uUmVzdWx0cyIsImZvcm1hdFJlc3VsdCIsInJlc3VsdCIsImlkIiwiam9iX2lkIiwicHJvbXB0IiwibmVnYXRpdmVfcHJvbXB0IiwiaW1hZ2VfdXJsIiwidGh1bWJuYWlsX3VybCIsIndpZHRoIiwiaGVpZ2h0Iiwic3RlcHMiLCJjZmdfc2NhbGUiLCJzZWVkIiwiYmF0Y2hfY291bnQiLCJiYXRjaF9zaXplIiwiY3JlYXRlZF9hdCIsImZpbGVfc2l6ZSIsImdlbmVyYXRpb25fdGltZSIsIm1vZGVsX3VzZWQiLCJ1c2VyX2lkIiwicmF0aW5nIiwidGFncyIsIkFycmF5IiwiaXNBcnJheSIsIm1ldGFkYXRhIiwiZm9ybWF0RmlsZVNpemUiLCJieXRlcyIsInVuaXRzIiwidGhyZXNob2xkIiwic2l6ZSIsInVuaXRJbmRleCIsImxlbmd0aCIsInRvRml4ZWQiLCJmb3JtYXRHZW5lcmF0aW9uVGltZSIsInNlY29uZHMiLCJtaW51dGVzIiwiTWF0aCIsImZsb29yIiwicmVtYWluaW5nU2Vjb25kcyIsInJvdW5kIiwiaG91cnMiLCJmb3JtYXREYXRlIiwiZGF0ZVN0cmluZyIsImRhdGUiLCJEYXRlIiwibm93IiwiZGlmZk1zIiwiZGlmZkhvdXJzIiwiZGlmZk1pbnV0ZXMiLCJkaWZmRGF5cyIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImVycm9yIiwiZ2V0QXNwZWN0UmF0aW8iLCJnY2QiLCJhIiwiYiIsImRpdmlzb3IiLCJ3aWR0aFJhdGlvIiwiaGVpZ2h0UmF0aW8iLCJjb21tb25SYXRpb3MiLCJyYXRpbyIsInciLCJoIiwiT2JqZWN0IiwiZW50cmllcyIsImdldFJlc29sdXRpb25DYXRlZ29yeSIsInBpeGVscyIsImV4dHJhY3RQYXJhbWV0ZXJzIiwic2FtcGxlciIsInNjaGVkdWxlciIsIm1vZGVsIiwidmFsaWRhdGVSZXN1bHQiLCJlcnJvcnMiLCJwdXNoIiwiaXNWYWxpZCIsImZpbHRlclJlc3VsdHMiLCJyZXN1bHRzIiwiZmlsdGVycyIsImZpbHRlciIsInNlYXJjaCIsInNlYXJjaFRleHQiLCJ0b0xvd2VyQ2FzZSIsImpvaW4iLCJpbmNsdWRlcyIsIm1pblJhdGluZyIsInJlc29sdXRpb24iLCJjYXRlZ29yeSIsImFzcGVjdFJhdGlvIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJyZXN1bHREYXRlIiwicmVzdWx0VGFncyIsImhhc01hdGNoaW5nVGFnIiwic29tZSIsInRhZyIsInJlc3VsdFRhZyIsInNvcnRSZXN1bHRzIiwic29ydEJ5Iiwic29ydE9yZGVyIiwic29ydGVkUmVzdWx0cyIsInNvcnQiLCJ2YWx1ZUEiLCJ2YWx1ZUIiLCJnZXRVbmlxdWVWYWx1ZXMiLCJmaWVsZCIsInZhbHVlcyIsIlNldCIsImZvckVhY2giLCJ2YWx1ZSIsImFkZCIsImZyb20iLCJjcmVhdGVHYWxsZXJ5TGF5b3V0Iiwidmlld01vZGUiLCJjb2x1bW5zIiwiaXRlbXMiLCJsYXlvdXQiLCJpdGVtc1BlclBhZ2UiLCJtYXAiLCJpbmRleCIsImZvcm1hdHRlZCIsImRpc3BsYXlUZXh0IiwiY3JlYXRlRGlzcGxheVRleHQiLCJ0aHVtYm5haWxVcmwiLCJ0aXRsZSIsInRydW5jYXRlVGV4dCIsInN1YnRpdGxlIiwiZGV0YWlscyIsInRleHQiLCJtYXhMZW5ndGgiLCJzdWJzdHJpbmciLCJnZXRSZXN1bHRTdGF0aXN0aWNzIiwidG90YWwiLCJhdmVyYWdlUmF0aW5nIiwiYXZlcmFnZUdlbmVyYXRpb25UaW1lIiwidG90YWxGaWxlU2l6ZSIsInJlc29sdXRpb25EaXN0cmlidXRpb24iLCJtb2RlbERpc3RyaWJ1dGlvbiIsImFzcGVjdFJhdGlvRGlzdHJpYnV0aW9uIiwic3RhdHMiLCJ0b3RhbFJhdGluZyIsInRvdGFsR2VuZXJhdGlvblRpbWUiLCJyYXRlZFJlc3VsdHMiLCJ0aW1lZFJlc3VsdHMiLCJtb2R1bGUiLCJleHBvcnRzIiwid2luZG93Il0sInNvdXJjZXMiOlsicmVzdWx0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdlbmVyYXRpb24gU3R1ZGlvIC0gUmVzdWx0cyBNYW5hZ2VtZW50IE1vZHVsZVxuICogXG4gKiBIYW5kbGVzIHJlc3VsdCBkaXNwbGF5LCBtYW5hZ2VtZW50LCBhbmQgaW50ZXJhY3Rpb24gb3BlcmF0aW9ucy5cbiAqL1xuXG4vKipcbiAqIFJlc3VsdHMgbWFuYWdlbWVudCBmb3IgZ2VuZXJhdGlvbiBzdHVkaW9cbiAqL1xuY29uc3QgZ2VuZXJhdGlvblJlc3VsdHMgPSB7XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBhIHJlc3VsdCBmb3IgZGlzcGxheVxuICAgICAqL1xuICAgIGZvcm1hdFJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiByZXN1bHQuaWQsXG4gICAgICAgICAgICBqb2JfaWQ6IHJlc3VsdC5qb2JfaWQsXG4gICAgICAgICAgICBwcm9tcHQ6IHJlc3VsdC5wcm9tcHQgfHwgJycsXG4gICAgICAgICAgICBuZWdhdGl2ZV9wcm9tcHQ6IHJlc3VsdC5uZWdhdGl2ZV9wcm9tcHQgfHwgJycsXG4gICAgICAgICAgICBpbWFnZV91cmw6IHJlc3VsdC5pbWFnZV91cmwsXG4gICAgICAgICAgICB0aHVtYm5haWxfdXJsOiByZXN1bHQudGh1bWJuYWlsX3VybCB8fCByZXN1bHQuaW1hZ2VfdXJsLFxuICAgICAgICAgICAgd2lkdGg6IHJlc3VsdC53aWR0aCB8fCA1MTIsXG4gICAgICAgICAgICBoZWlnaHQ6IHJlc3VsdC5oZWlnaHQgfHwgNTEyLFxuICAgICAgICAgICAgc3RlcHM6IHJlc3VsdC5zdGVwcyB8fCAyMCxcbiAgICAgICAgICAgIGNmZ19zY2FsZTogcmVzdWx0LmNmZ19zY2FsZSB8fCA3LjAsXG4gICAgICAgICAgICBzZWVkOiByZXN1bHQuc2VlZCB8fCAtMSxcbiAgICAgICAgICAgIGJhdGNoX2NvdW50OiByZXN1bHQuYmF0Y2hfY291bnQgfHwgMSxcbiAgICAgICAgICAgIGJhdGNoX3NpemU6IHJlc3VsdC5iYXRjaF9zaXplIHx8IDEsXG4gICAgICAgICAgICBjcmVhdGVkX2F0OiByZXN1bHQuY3JlYXRlZF9hdCxcbiAgICAgICAgICAgIGZpbGVfc2l6ZTogcmVzdWx0LmZpbGVfc2l6ZSB8fCAwLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbl90aW1lOiByZXN1bHQuZ2VuZXJhdGlvbl90aW1lIHx8IDAsXG4gICAgICAgICAgICBtb2RlbF91c2VkOiByZXN1bHQubW9kZWxfdXNlZCB8fCAnVW5rbm93bicsXG4gICAgICAgICAgICB1c2VyX2lkOiByZXN1bHQudXNlcl9pZCxcbiAgICAgICAgICAgIHJhdGluZzogcmVzdWx0LnJhdGluZyB8fCAwLFxuICAgICAgICAgICAgdGFnczogQXJyYXkuaXNBcnJheShyZXN1bHQudGFncykgPyByZXN1bHQudGFncyA6IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJlc3VsdC5tZXRhZGF0YSB8fCB7fVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBmaWxlIHNpemUgZm9yIGRpc3BsYXlcbiAgICAgKi9cbiAgICBmb3JtYXRGaWxlU2l6ZShieXRlcykge1xuICAgICAgICBpZiAoIWJ5dGVzIHx8IGJ5dGVzID09PSAwKSByZXR1cm4gJ+KAlCc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1bml0cyA9IFsnQicsICdLQicsICdNQicsICdHQiddO1xuICAgICAgICBjb25zdCB0aHJlc2hvbGQgPSAxMDI0O1xuICAgICAgICBcbiAgICAgICAgbGV0IHNpemUgPSBieXRlcztcbiAgICAgICAgbGV0IHVuaXRJbmRleCA9IDA7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoc2l6ZSA+PSB0aHJlc2hvbGQgJiYgdW5pdEluZGV4IDwgdW5pdHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgc2l6ZSAvPSB0aHJlc2hvbGQ7XG4gICAgICAgICAgICB1bml0SW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGAke3NpemUudG9GaXhlZCh1bml0SW5kZXggPT09IDAgPyAwIDogMSl9ICR7dW5pdHNbdW5pdEluZGV4XX1gO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBnZW5lcmF0aW9uIHRpbWUgZm9yIGRpc3BsYXlcbiAgICAgKi9cbiAgICBmb3JtYXRHZW5lcmF0aW9uVGltZShzZWNvbmRzKSB7XG4gICAgICAgIGlmICghc2Vjb25kcyB8fCBzZWNvbmRzIDw9IDApIHJldHVybiAn4oCUJztcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWNvbmRzIDwgNjApIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtzZWNvbmRzLnRvRml4ZWQoMSl9c2A7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA8IDM2MDApIHtcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmdTZWNvbmRzID0gTWF0aC5yb3VuZChzZWNvbmRzICUgNjApO1xuICAgICAgICAgICAgcmV0dXJuIGAke21pbnV0ZXN9bSAke3JlbWFpbmluZ1NlY29uZHN9c2A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICAgICAgICAgIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlc31tYDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBkYXRlIGZvciBkaXNwbGF5XG4gICAgICovXG4gICAgZm9ybWF0RGF0ZShkYXRlU3RyaW5nKSB7XG4gICAgICAgIGlmICghZGF0ZVN0cmluZykgcmV0dXJuICfigJQnO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBjb25zdCBkaWZmTXMgPSBub3cgLSBkYXRlO1xuICAgICAgICAgICAgY29uc3QgZGlmZkhvdXJzID0gZGlmZk1zIC8gKDEwMDAgKiA2MCAqIDYwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRpZmZIb3VycyA8IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmTWludXRlcyA9IE1hdGguZmxvb3IoZGlmZk1zIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtkaWZmTWludXRlc31tIGFnb2A7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmZIb3VycyA8IDI0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke01hdGguZmxvb3IoZGlmZkhvdXJzKX1oIGFnb2A7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmZIb3VycyA8IDcyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZIb3VycyAvIDI0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZGlmZkRheXN9ZCBhZ29gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiAn4oCUJztcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0cyBhc3BlY3QgcmF0aW8gZm9yIHJlc3VsdFxuICAgICAqL1xuICAgIGdldEFzcGVjdFJhdGlvKHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LndpZHRoIHx8ICFyZXN1bHQuaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBnY2QgPSAoYSwgYikgPT4gYiA9PT0gMCA/IGEgOiBnY2QoYiwgYSAlIGIpO1xuICAgICAgICBjb25zdCBkaXZpc29yID0gZ2NkKHJlc3VsdC53aWR0aCwgcmVzdWx0LmhlaWdodCk7XG4gICAgICAgIGNvbnN0IHdpZHRoUmF0aW8gPSByZXN1bHQud2lkdGggLyBkaXZpc29yO1xuICAgICAgICBjb25zdCBoZWlnaHRSYXRpbyA9IHJlc3VsdC5oZWlnaHQgLyBkaXZpc29yO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29tbW9uIGFzcGVjdCByYXRpb3NcbiAgICAgICAgY29uc3QgY29tbW9uUmF0aW9zID0ge1xuICAgICAgICAgICAgJzE6MSc6IFsxLCAxXSxcbiAgICAgICAgICAgICc0OjMnOiBbNCwgM10sXG4gICAgICAgICAgICAnMzoyJzogWzMsIDJdLFxuICAgICAgICAgICAgJzE2OjknOiBbMTYsIDldLFxuICAgICAgICAgICAgJzk6MTYnOiBbOSwgMTZdLFxuICAgICAgICAgICAgJzI6Myc6IFsyLCAzXSxcbiAgICAgICAgICAgICczOjQnOiBbMywgNF1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgW3JhdGlvLCBbdywgaF1dIG9mIE9iamVjdC5lbnRyaWVzKGNvbW1vblJhdGlvcykpIHtcbiAgICAgICAgICAgIGlmICh3aWR0aFJhdGlvID09PSB3ICYmIGhlaWdodFJhdGlvID09PSBoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhdGlvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYCR7d2lkdGhSYXRpb306JHtoZWlnaHRSYXRpb31gO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0cyByZXNvbHV0aW9uIGNhdGVnb3J5XG4gICAgICovXG4gICAgZ2V0UmVzb2x1dGlvbkNhdGVnb3J5KHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LndpZHRoIHx8ICFyZXN1bHQuaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwaXhlbHMgPSByZXN1bHQud2lkdGggKiByZXN1bHQuaGVpZ2h0O1xuICAgICAgICBcbiAgICAgICAgaWYgKHBpeGVscyA8PSA1MTIgKiA1MTIpIHtcbiAgICAgICAgICAgIHJldHVybiAnTG93ICjiiaQ1MTLCsiknO1xuICAgICAgICB9IGVsc2UgaWYgKHBpeGVscyA8PSA3NjggKiA3NjgpIHtcbiAgICAgICAgICAgIHJldHVybiAnTWVkaXVtICjiiaQ3NjjCsiknO1xuICAgICAgICB9IGVsc2UgaWYgKHBpeGVscyA8PSAxMDI0ICogMTAyNCkge1xuICAgICAgICAgICAgcmV0dXJuICdIaWdoICjiiaQxMDI0wrIpJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnVWx0cmEgKD4xMDI0wrIpJztcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBwYXJhbWV0ZXJzIG9iamVjdCBmcm9tIHJlc3VsdCBmb3IgcmV1c2VcbiAgICAgKi9cbiAgICBleHRyYWN0UGFyYW1ldGVycyhyZXN1bHQpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb21wdDogcmVzdWx0LnByb21wdCB8fCAnJyxcbiAgICAgICAgICAgIG5lZ2F0aXZlX3Byb21wdDogcmVzdWx0Lm5lZ2F0aXZlX3Byb21wdCB8fCAnJyxcbiAgICAgICAgICAgIHdpZHRoOiByZXN1bHQud2lkdGggfHwgNTEyLFxuICAgICAgICAgICAgaGVpZ2h0OiByZXN1bHQuaGVpZ2h0IHx8IDUxMixcbiAgICAgICAgICAgIHN0ZXBzOiByZXN1bHQuc3RlcHMgfHwgMjAsXG4gICAgICAgICAgICBjZmdfc2NhbGU6IHJlc3VsdC5jZmdfc2NhbGUgfHwgNy4wLFxuICAgICAgICAgICAgc2VlZDogcmVzdWx0LnNlZWQgfHwgLTEsXG4gICAgICAgICAgICBiYXRjaF9jb3VudDogcmVzdWx0LmJhdGNoX2NvdW50IHx8IDEsXG4gICAgICAgICAgICBiYXRjaF9zaXplOiByZXN1bHQuYmF0Y2hfc2l6ZSB8fCAxLFxuICAgICAgICAgICAgc2FtcGxlcjogcmVzdWx0Lm1ldGFkYXRhPy5zYW1wbGVyLFxuICAgICAgICAgICAgc2NoZWR1bGVyOiByZXN1bHQubWV0YWRhdGE/LnNjaGVkdWxlcixcbiAgICAgICAgICAgIG1vZGVsOiByZXN1bHQubW9kZWxfdXNlZFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHJlc3VsdCBkYXRhXG4gICAgICovXG4gICAgdmFsaWRhdGVSZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdSZXN1bHQgaXMgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgICAgICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvcnMgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXN1bHQuaWQpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdSZXN1bHQgSUQgaXMgbWlzc2luZycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3VsdC5pbWFnZV91cmwpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdJbWFnZSBVUkwgaXMgbWlzc2luZycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3VsdC5wcm9tcHQpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdQcm9tcHQgaXMgbWlzc2luZycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3VsdC53aWR0aCB8fCAhcmVzdWx0LmhlaWdodCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0RpbWVuc2lvbnMgYXJlIG1pc3NpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXN1bHQuY3JlYXRlZF9hdCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0NyZWF0aW9uIGRhdGUgaXMgbWlzc2luZycpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIGVycm9yc1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogRmlsdGVycyByZXN1bHRzIGJhc2VkIG9uIGNyaXRlcmlhXG4gICAgICovXG4gICAgZmlsdGVyUmVzdWx0cyhyZXN1bHRzLCBmaWx0ZXJzID0ge30pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3VsdHMpKSByZXR1cm4gW107XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0cy5maWx0ZXIocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIC8vIFNlYXJjaCB0ZXh0IGZpbHRlclxuICAgICAgICAgICAgaWYgKGZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGV4dCA9IGZpbHRlcnMuc2VhcmNoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gKHJlc3VsdC5wcm9tcHQgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IChyZXN1bHQudGFncyB8fCBbXSkuam9pbignICcpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9tcHQuaW5jbHVkZXMoc2VhcmNoVGV4dCkgJiYgIXRhZ3MuaW5jbHVkZXMoc2VhcmNoVGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmF0aW5nIGZpbHRlclxuICAgICAgICAgICAgaWYgKGZpbHRlcnMubWluUmF0aW5nICYmIHJlc3VsdC5yYXRpbmcgPCBmaWx0ZXJzLm1pblJhdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzb2x1dGlvbiBmaWx0ZXJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJzLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IHRoaXMuZ2V0UmVzb2x1dGlvbkNhdGVnb3J5KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5ICE9PSBmaWx0ZXJzLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQXNwZWN0IHJhdGlvIGZpbHRlclxuICAgICAgICAgICAgaWYgKGZpbHRlcnMuYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXRpbyA9IHRoaXMuZ2V0QXNwZWN0UmF0aW8ocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAocmF0aW8gIT09IGZpbHRlcnMuYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9kZWwgZmlsdGVyXG4gICAgICAgICAgICBpZiAoZmlsdGVycy5tb2RlbCAmJiByZXN1bHQubW9kZWxfdXNlZCAhPT0gZmlsdGVycy5tb2RlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGF0ZSByYW5nZSBmaWx0ZXJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJzLmRhdGVGcm9tIHx8IGZpbHRlcnMuZGF0ZVRvKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0RGF0ZSA9IG5ldyBEYXRlKHJlc3VsdC5jcmVhdGVkX2F0KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVycy5kYXRlRnJvbSAmJiByZXN1bHREYXRlIDwgbmV3IERhdGUoZmlsdGVycy5kYXRlRnJvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVycy5kYXRlVG8gJiYgcmVzdWx0RGF0ZSA+IG5ldyBEYXRlKGZpbHRlcnMuZGF0ZVRvKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUYWdzIGZpbHRlclxuICAgICAgICAgICAgaWYgKGZpbHRlcnMudGFncyAmJiBmaWx0ZXJzLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFRhZ3MgPSByZXN1bHQudGFncyB8fCBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNNYXRjaGluZ1RhZyA9IGZpbHRlcnMudGFncy5zb21lKHRhZyA9PiBcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0VGFncy5zb21lKHJlc3VsdFRhZyA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRhZy50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoIWhhc01hdGNoaW5nVGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIFNvcnRzIHJlc3VsdHMgYmFzZWQgb24gY3JpdGVyaWFcbiAgICAgKi9cbiAgICBzb3J0UmVzdWx0cyhyZXN1bHRzLCBzb3J0QnkgPSAnY3JlYXRlZF9hdCcsIHNvcnRPcmRlciA9ICdkZXNjJykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0cykpIHJldHVybiBbXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNvcnRlZFJlc3VsdHMgPSBbLi4ucmVzdWx0c107XG4gICAgICAgIFxuICAgICAgICBzb3J0ZWRSZXN1bHRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZUEsIHZhbHVlQjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoIChzb3J0QnkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGVkX2F0JzpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVBID0gbmV3IERhdGUoYS5jcmVhdGVkX2F0IHx8IDApO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZUIgPSBuZXcgRGF0ZShiLmNyZWF0ZWRfYXQgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdyYXRpbmcnOlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUEgPSBhLnJhdGluZyB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZUIgPSBiLnJhdGluZyB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSAnZ2VuZXJhdGlvbl90aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVBID0gYS5nZW5lcmF0aW9uX3RpbWUgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVCID0gYi5nZW5lcmF0aW9uX3RpbWUgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbGVfc2l6ZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQSA9IGEuZmlsZV9zaXplIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQiA9IGIuZmlsZV9zaXplIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlICdyZXNvbHV0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVBID0gKGEud2lkdGggfHwgMCkgKiAoYS5oZWlnaHQgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQiA9IChiLndpZHRoIHx8IDApICogKGIuaGVpZ2h0IHx8IDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSAnc3RlcHMnOlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUEgPSBhLnN0ZXBzIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQiA9IGIuc3RlcHMgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgJ2NmZ19zY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQSA9IGEuY2ZnX3NjYWxlIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQiA9IGIuY2ZnX3NjYWxlIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUEgPSBhW3NvcnRCeV0gfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlQiA9IGJbc29ydEJ5XSB8fCAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHZhbHVlQSA8IHZhbHVlQikgcmV0dXJuIHNvcnRPcmRlciA9PT0gJ2FzYycgPyAtMSA6IDE7XG4gICAgICAgICAgICBpZiAodmFsdWVBID4gdmFsdWVCKSByZXR1cm4gc29ydE9yZGVyID09PSAnYXNjJyA/IDEgOiAtMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzb3J0ZWRSZXN1bHRzO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0cyB1bmlxdWUgdmFsdWVzIGZvciBmaWx0ZXJpbmdcbiAgICAgKi9cbiAgICBnZXRVbmlxdWVWYWx1ZXMocmVzdWx0cywgZmllbGQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3VsdHMpKSByZXR1cm4gW107XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIFxuICAgICAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoIChmaWVsZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21vZGVsJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHQubW9kZWxfdXNlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVzb2x1dGlvbic6XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5nZXRSZXNvbHV0aW9uQ2F0ZWdvcnkocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXNwZWN0UmF0aW8nOlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0QXNwZWN0UmF0aW8ocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGFncyc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdC50YWdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRhZ3MuZm9yRWFjaCh0YWcgPT4gdmFsdWVzLmFkZCh0YWcpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRbZmllbGRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgIT09ICdVbmtub3duJykge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5hZGQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlcykuc29ydCgpO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBnYWxsZXJ5IGxheW91dCBjb25maWd1cmF0aW9uXG4gICAgICovXG4gICAgY3JlYXRlR2FsbGVyeUxheW91dChyZXN1bHRzLCB2aWV3TW9kZSA9ICdncmlkJywgY29sdW1ucyA9IDMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3VsdHMpKSByZXR1cm4geyBpdGVtczogW10sIGxheW91dDoge30gfTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxheW91dCA9IHtcbiAgICAgICAgICAgIHZpZXdNb2RlLFxuICAgICAgICAgICAgY29sdW1ucyxcbiAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdmlld01vZGUgPT09ICdncmlkJyA/IGNvbHVtbnMgKiA0IDogMTAsXG4gICAgICAgICAgICBhc3BlY3RSYXRpbzogJzE6MSdcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gcmVzdWx0cy5tYXAoKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0UmVzdWx0KHJlc3VsdCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZm9ybWF0dGVkLFxuICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiB0aGlzLmNyZWF0ZURpc3BsYXlUZXh0KGZvcm1hdHRlZCwgdmlld01vZGUpLFxuICAgICAgICAgICAgICAgIHRodW1ibmFpbFVybDogZm9ybWF0dGVkLnRodW1ibmFpbF91cmwgfHwgZm9ybWF0dGVkLmltYWdlX3VybCxcbiAgICAgICAgICAgICAgICBhc3BlY3RSYXRpbzogdGhpcy5nZXRBc3BlY3RSYXRpbyhmb3JtYXR0ZWQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IGl0ZW1zLCBsYXlvdXQgfTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgZGlzcGxheSB0ZXh0IGZvciByZXN1bHRcbiAgICAgKi9cbiAgICBjcmVhdGVEaXNwbGF5VGV4dChyZXN1bHQsIHZpZXdNb2RlKSB7XG4gICAgICAgIGlmICh2aWV3TW9kZSA9PT0gJ2xpc3QnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRydW5jYXRlVGV4dChyZXN1bHQucHJvbXB0LCA1MCksXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGAke3Jlc3VsdC53aWR0aH3DlyR7cmVzdWx0LmhlaWdodH0g4oCiICR7dGhpcy5mb3JtYXREYXRlKHJlc3VsdC5jcmVhdGVkX2F0KX1gLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IGAke3Jlc3VsdC5zdGVwc30gc3RlcHMg4oCiIENGRyAke3Jlc3VsdC5jZmdfc2NhbGV9IOKAoiAke3RoaXMuZm9ybWF0R2VuZXJhdGlvblRpbWUocmVzdWx0LmdlbmVyYXRpb25fdGltZSl9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRydW5jYXRlVGV4dChyZXN1bHQucHJvbXB0LCAzMCksXG4gICAgICAgICAgICBzdWJ0aXRsZTogYCR7cmVzdWx0LndpZHRofcOXJHtyZXN1bHQuaGVpZ2h0fWBcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIFRydW5jYXRlcyB0ZXh0IHRvIHNwZWNpZmllZCBsZW5ndGhcbiAgICAgKi9cbiAgICB0cnVuY2F0ZVRleHQodGV4dCwgbWF4TGVuZ3RoKSB7XG4gICAgICAgIGlmICghdGV4dCB8fCB0ZXh0Lmxlbmd0aCA8PSBtYXhMZW5ndGgpIHJldHVybiB0ZXh0O1xuICAgICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoIC0gMykgKyAnLi4uJztcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgcmVzdWx0IHN0YXRpc3RpY3NcbiAgICAgKi9cbiAgICBnZXRSZXN1bHRTdGF0aXN0aWNzKHJlc3VsdHMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3VsdHMpIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VSYXRpbmc6IDAsXG4gICAgICAgICAgICAgICAgYXZlcmFnZUdlbmVyYXRpb25UaW1lOiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsRmlsZVNpemU6IDAsXG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbkRpc3RyaWJ1dGlvbjoge30sXG4gICAgICAgICAgICAgICAgbW9kZWxEaXN0cmlidXRpb246IHt9LFxuICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvRGlzdHJpYnV0aW9uOiB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgICAgICB0b3RhbDogcmVzdWx0cy5sZW5ndGgsXG4gICAgICAgICAgICBhdmVyYWdlUmF0aW5nOiAwLFxuICAgICAgICAgICAgYXZlcmFnZUdlbmVyYXRpb25UaW1lOiAwLFxuICAgICAgICAgICAgdG90YWxGaWxlU2l6ZTogMCxcbiAgICAgICAgICAgIHJlc29sdXRpb25EaXN0cmlidXRpb246IHt9LFxuICAgICAgICAgICAgbW9kZWxEaXN0cmlidXRpb246IHt9LFxuICAgICAgICAgICAgYXNwZWN0UmF0aW9EaXN0cmlidXRpb246IHt9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBsZXQgdG90YWxSYXRpbmcgPSAwO1xuICAgICAgICBsZXQgdG90YWxHZW5lcmF0aW9uVGltZSA9IDA7XG4gICAgICAgIGxldCByYXRlZFJlc3VsdHMgPSAwO1xuICAgICAgICBsZXQgdGltZWRSZXN1bHRzID0gMDtcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgICAgICAgLy8gUmF0aW5nIHN0YXRpc3RpY3NcbiAgICAgICAgICAgIGlmIChyZXN1bHQucmF0aW5nICYmIHJlc3VsdC5yYXRpbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgdG90YWxSYXRpbmcgKz0gcmVzdWx0LnJhdGluZztcbiAgICAgICAgICAgICAgICByYXRlZFJlc3VsdHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR2VuZXJhdGlvbiB0aW1lIHN0YXRpc3RpY3NcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZ2VuZXJhdGlvbl90aW1lICYmIHJlc3VsdC5nZW5lcmF0aW9uX3RpbWUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdG90YWxHZW5lcmF0aW9uVGltZSArPSByZXN1bHQuZ2VuZXJhdGlvbl90aW1lO1xuICAgICAgICAgICAgICAgIHRpbWVkUmVzdWx0cysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGaWxlIHNpemVcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZmlsZV9zaXplKSB7XG4gICAgICAgICAgICAgICAgc3RhdHMudG90YWxGaWxlU2l6ZSArPSByZXN1bHQuZmlsZV9zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNvbHV0aW9uIGRpc3RyaWJ1dGlvblxuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkNhdGVnb3J5KHJlc3VsdCk7XG4gICAgICAgICAgICBzdGF0cy5yZXNvbHV0aW9uRGlzdHJpYnV0aW9uW3Jlc29sdXRpb25dID0gKHN0YXRzLnJlc29sdXRpb25EaXN0cmlidXRpb25bcmVzb2x1dGlvbl0gfHwgMCkgKyAxO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2RlbCBkaXN0cmlidXRpb25cbiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gcmVzdWx0Lm1vZGVsX3VzZWQgfHwgJ1Vua25vd24nO1xuICAgICAgICAgICAgc3RhdHMubW9kZWxEaXN0cmlidXRpb25bbW9kZWxdID0gKHN0YXRzLm1vZGVsRGlzdHJpYnV0aW9uW21vZGVsXSB8fCAwKSArIDE7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFzcGVjdCByYXRpbyBkaXN0cmlidXRpb25cbiAgICAgICAgICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdGhpcy5nZXRBc3BlY3RSYXRpbyhyZXN1bHQpO1xuICAgICAgICAgICAgc3RhdHMuYXNwZWN0UmF0aW9EaXN0cmlidXRpb25bYXNwZWN0UmF0aW9dID0gKHN0YXRzLmFzcGVjdFJhdGlvRGlzdHJpYnV0aW9uW2FzcGVjdFJhdGlvXSB8fCAwKSArIDE7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJhdGVkUmVzdWx0cyA+IDApIHtcbiAgICAgICAgICAgIHN0YXRzLmF2ZXJhZ2VSYXRpbmcgPSB0b3RhbFJhdGluZyAvIHJhdGVkUmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRpbWVkUmVzdWx0cyA+IDApIHtcbiAgICAgICAgICAgIHN0YXRzLmF2ZXJhZ2VHZW5lcmF0aW9uVGltZSA9IHRvdGFsR2VuZXJhdGlvblRpbWUgLyB0aW1lZFJlc3VsdHM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdGF0cztcbiAgICB9XG59O1xuXG4vLyBFeHBvcnQgZm9yIHVzZSBpbiBvdGhlciBtb2R1bGVzXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHsgZ2VuZXJhdGlvblJlc3VsdHMgfTtcbn0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuZ2VuZXJhdGlvblJlc3VsdHMgPSBnZW5lcmF0aW9uUmVzdWx0cztcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNB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QUFJM0ksTUFBTSxDQUFDZ0IsZUFBZTtRQUM3QzZILFlBQVksRUFBRTtNQUNsQjs7TUFFQTtNQUNBLElBQUk3SSxNQUFNLENBQUNlLFNBQVMsRUFBRTtRQUNsQjBILEtBQUssQ0FBQ0osYUFBYSxJQUFJckksTUFBTSxDQUFDZSxTQUFTO01BQzNDOztNQUVBO01BQ0EsTUFBTXFFLFVBQVUsR0FBRyxJQUFJLENBQUNwQixxQkFBcUIsQ0FBQ2hFLE1BQU0sQ0FBQztNQUNyRHlJLEtBQUssQ0FBQ0gsc0JBQXNCLENBQUNsRCxVQUFVLENBQUMsR0FBRyxDQUFDcUQsS0FBSyxDQUFDSCxzQkFBc0IsQ0FBQ2xELFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDOztNQUU5RjtNQUNBLE1BQU1mLEtBQUssR0FBR3JFLE1BQU0sQ0FBQ2lCLFVBQVUsSUFBSSxTQUFTO01BQzVDd0gsS0FBSyxDQUFDRixpQkFBaUIsQ0FBQ2xFLEtBQUssQ0FBQyxHQUFHLENBQUNvRSxLQUFLLENBQUNGLGlCQUFpQixDQUFDbEUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7O01BRTFFO01BQ0EsTUFBTWlCLFdBQVcsR0FBRyxJQUFJLENBQUNuQyxjQUFjLENBQUNuRCxNQUFNLENBQUM7TUFDL0N5SSxLQUFLLENBQUNELHVCQUF1QixDQUFDbEQsV0FBVyxDQUFDLEdBQUcsQ0FBQ21ELEtBQUssQ0FBQ0QsdUJBQXVCLENBQUNsRCxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN0RyxDQUFDLENBQUM7SUFFRixJQUFJc0QsWUFBWSxHQUFHLENBQUMsRUFBRTtNQUNsQkgsS0FBSyxDQUFDTixhQUFhLEdBQUdPLFdBQVcsR0FBR0UsWUFBWTtJQUNwRDtJQUVBLElBQUlDLFlBQVksR0FBRyxDQUFDLEVBQUU7TUFDbEJKLEtBQUssQ0FBQ0wscUJBQXFCLEdBQUdPLG1CQUFtQixHQUFHRSxZQUFZO0lBQ3BFO0lBRUEsT0FBT0osS0FBSztFQUNoQjtBQUNKLENBQUM7O0FBRUQ7QUFDQSxJQUFJLE9BQU9LLE1BQU0sS0FBSyxXQUFXLElBQUlBLE1BQU0sQ0FBQ0MsT0FBTyxFQUFFO0VBQ2pERCxNQUFNLENBQUNDLE9BQU8sR0FBRztJQUFFako7RUFBa0IsQ0FBQztBQUMxQyxDQUFDLE1BQU0sSUFBSSxPQUFPa0osTUFBTSxLQUFLLFdBQVcsRUFBRTtFQUN0Q0EsTUFBTSxDQUFDbEosaUJBQWlCLEdBQUdBLGlCQUFpQjtBQUNoRCIsImlnbm9yZUxpc3QiOltdfQ==