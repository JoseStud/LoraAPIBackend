{"version":3,"names":["generationResults","formatResult","result","id","job_id","prompt","negative_prompt","image_url","thumbnail_url","width","height","steps","cfg_scale","seed","batch_count","batch_size","created_at","file_size","generation_time","model_used","user_id","rating","tags","Array","isArray","metadata","formatFileSize","bytes","units","threshold","size","unitIndex","length","toFixed","formatGenerationTime","seconds","minutes","Math","floor","remainingSeconds","round","hours","formatDate","dateString","date","Date","now","diffMs","diffHours","diffMinutes","diffDays","toLocaleDateString","error","getAspectRatio","gcd","a","b","divisor","widthRatio","heightRatio","commonRatios","ratio","w","h","Object","entries","getResolutionCategory","pixels","extractParameters","sampler","scheduler","model","validateResult","errors","push","isValid","filterResults","results","filters","filter","search","searchText","toLowerCase","join","includes","minRating","resolution","category","aspectRatio","dateFrom","dateTo","resultDate","resultTags","hasMatchingTag","some","tag","resultTag","sortResults","sortBy","sortOrder","sortedResults","sort","valueA","valueB","getUniqueValues","field","values","Set","forEach","value","add","from","createGalleryLayout","viewMode","columns","items","layout","itemsPerPage","map","index","formatted","displayText","createDisplayText","thumbnailUrl","title","truncateText","subtitle","details","text","maxLength","substring","getResultStatistics","total","averageRating","averageGenerationTime","totalFileSize","resolutionDistribution","modelDistribution","aspectRatioDistribution","stats","totalRating","totalGenerationTime","ratedResults","timedResults","module","exports","window"],"sources":["results.js"],"sourcesContent":["/**\n * Generation Studio - Results Management Module\n * \n * Handles result display, management, and interaction operations.\n */\n\n/**\n * Results management for generation studio\n */\nconst generationResults = {\n    /**\n     * Formats a result for display\n     */\n    formatResult(result) {\n        if (!result) return null;\n        \n        return {\n            id: result.id,\n            job_id: result.job_id,\n            prompt: result.prompt || '',\n            negative_prompt: result.negative_prompt || '',\n            image_url: result.image_url,\n            thumbnail_url: result.thumbnail_url || result.image_url,\n            width: result.width || 512,\n            height: result.height || 512,\n            steps: result.steps || 20,\n            cfg_scale: result.cfg_scale || 7.0,\n            seed: result.seed || -1,\n            batch_count: result.batch_count || 1,\n            batch_size: result.batch_size || 1,\n            created_at: result.created_at,\n            file_size: result.file_size || 0,\n            generation_time: result.generation_time || 0,\n            model_used: result.model_used || 'Unknown',\n            user_id: result.user_id,\n            rating: result.rating || 0,\n            tags: Array.isArray(result.tags) ? result.tags : [],\n            metadata: result.metadata || {}\n        };\n    },\n    \n    /**\n     * Formats file size for display\n     */\n    formatFileSize(bytes) {\n        if (!bytes || bytes === 0) return '—';\n        \n        const units = ['B', 'KB', 'MB', 'GB'];\n        const threshold = 1024;\n        \n        let size = bytes;\n        let unitIndex = 0;\n        \n        while (size >= threshold && unitIndex < units.length - 1) {\n            size /= threshold;\n            unitIndex++;\n        }\n        \n        return `${size.toFixed(unitIndex === 0 ? 0 : 1)} ${units[unitIndex]}`;\n    },\n    \n    /**\n     * Formats generation time for display\n     */\n    formatGenerationTime(seconds) {\n        if (!seconds || seconds <= 0) return '—';\n        \n        if (seconds < 60) {\n            return `${seconds.toFixed(1)}s`;\n        } else if (seconds < 3600) {\n            const minutes = Math.floor(seconds / 60);\n            const remainingSeconds = Math.round(seconds % 60);\n            return `${minutes}m ${remainingSeconds}s`;\n        } else {\n            const hours = Math.floor(seconds / 3600);\n            const minutes = Math.floor((seconds % 3600) / 60);\n            return `${hours}h ${minutes}m`;\n        }\n    },\n    \n    /**\n     * Formats date for display\n     */\n    formatDate(dateString) {\n        if (!dateString) return '—';\n        \n        try {\n            const date = new Date(dateString);\n            const now = new Date();\n            const diffMs = now - date;\n            const diffHours = diffMs / (1000 * 60 * 60);\n            \n            if (diffHours < 1) {\n                const diffMinutes = Math.floor(diffMs / (1000 * 60));\n                return `${diffMinutes}m ago`;\n            } else if (diffHours < 24) {\n                return `${Math.floor(diffHours)}h ago`;\n            } else if (diffHours < 72) {\n                const diffDays = Math.floor(diffHours / 24);\n                return `${diffDays}d ago`;\n            } else {\n                return date.toLocaleDateString();\n            }\n        } catch (error) {\n            return '—';\n        }\n    },\n    \n    /**\n     * Gets aspect ratio for result\n     */\n    getAspectRatio(result) {\n        if (!result || !result.width || !result.height) {\n            return 'Unknown';\n        }\n        \n        const gcd = (a, b) => b === 0 ? a : gcd(b, a % b);\n        const divisor = gcd(result.width, result.height);\n        const widthRatio = result.width / divisor;\n        const heightRatio = result.height / divisor;\n        \n        // Common aspect ratios\n        const commonRatios = {\n            '1:1': [1, 1],\n            '4:3': [4, 3],\n            '3:2': [3, 2],\n            '16:9': [16, 9],\n            '9:16': [9, 16],\n            '2:3': [2, 3],\n            '3:4': [3, 4]\n        };\n        \n        for (const [ratio, [w, h]] of Object.entries(commonRatios)) {\n            if (widthRatio === w && heightRatio === h) {\n                return ratio;\n            }\n        }\n        \n        return `${widthRatio}:${heightRatio}`;\n    },\n    \n    /**\n     * Gets resolution category\n     */\n    getResolutionCategory(result) {\n        if (!result || !result.width || !result.height) {\n            return 'Unknown';\n        }\n        \n        const pixels = result.width * result.height;\n        \n        if (pixels <= 512 * 512) {\n            return 'Low (≤512²)';\n        } else if (pixels <= 768 * 768) {\n            return 'Medium (≤768²)';\n        } else if (pixels <= 1024 * 1024) {\n            return 'High (≤1024²)';\n        } else {\n            return 'Ultra (>1024²)';\n        }\n    },\n    \n    /**\n     * Creates parameters object from result for reuse\n     */\n    extractParameters(result) {\n        if (!result) return null;\n        \n        return {\n            prompt: result.prompt || '',\n            negative_prompt: result.negative_prompt || '',\n            width: result.width || 512,\n            height: result.height || 512,\n            steps: result.steps || 20,\n            cfg_scale: result.cfg_scale || 7.0,\n            seed: result.seed || -1,\n            batch_count: result.batch_count || 1,\n            batch_size: result.batch_size || 1,\n            sampler: result.metadata?.sampler,\n            scheduler: result.metadata?.scheduler,\n            model: result.model_used\n        };\n    },\n    \n    /**\n     * Validates result data\n     */\n    validateResult(result) {\n        const errors = [];\n        \n        if (!result) {\n            errors.push('Result is null or undefined');\n            return { isValid: false, errors };\n        }\n        \n        if (!result.id) {\n            errors.push('Result ID is missing');\n        }\n        \n        if (!result.image_url) {\n            errors.push('Image URL is missing');\n        }\n        \n        if (!result.prompt) {\n            errors.push('Prompt is missing');\n        }\n        \n        if (!result.width || !result.height) {\n            errors.push('Dimensions are missing');\n        }\n        \n        if (!result.created_at) {\n            errors.push('Creation date is missing');\n        }\n        \n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    },\n    \n    /**\n     * Filters results based on criteria\n     */\n    filterResults(results, filters = {}) {\n        if (!Array.isArray(results)) return [];\n        \n        return results.filter(result => {\n            // Search text filter\n            if (filters.search) {\n                const searchText = filters.search.toLowerCase();\n                const prompt = (result.prompt || '').toLowerCase();\n                const tags = (result.tags || []).join(' ').toLowerCase();\n                \n                if (!prompt.includes(searchText) && !tags.includes(searchText)) {\n                    return false;\n                }\n            }\n            \n            // Rating filter\n            if (filters.minRating && result.rating < filters.minRating) {\n                return false;\n            }\n            \n            // Resolution filter\n            if (filters.resolution) {\n                const category = this.getResolutionCategory(result);\n                if (category !== filters.resolution) {\n                    return false;\n                }\n            }\n            \n            // Aspect ratio filter\n            if (filters.aspectRatio) {\n                const ratio = this.getAspectRatio(result);\n                if (ratio !== filters.aspectRatio) {\n                    return false;\n                }\n            }\n            \n            // Model filter\n            if (filters.model && result.model_used !== filters.model) {\n                return false;\n            }\n            \n            // Date range filter\n            if (filters.dateFrom || filters.dateTo) {\n                const resultDate = new Date(result.created_at);\n                \n                if (filters.dateFrom && resultDate < new Date(filters.dateFrom)) {\n                    return false;\n                }\n                \n                if (filters.dateTo && resultDate > new Date(filters.dateTo)) {\n                    return false;\n                }\n            }\n            \n            // Tags filter\n            if (filters.tags && filters.tags.length > 0) {\n                const resultTags = result.tags || [];\n                const hasMatchingTag = filters.tags.some(tag => \n                    resultTags.some(resultTag => \n                        resultTag.toLowerCase().includes(tag.toLowerCase())\n                    )\n                );\n                \n                if (!hasMatchingTag) {\n                    return false;\n                }\n            }\n            \n            return true;\n        });\n    },\n    \n    /**\n     * Sorts results based on criteria\n     */\n    sortResults(results, sortBy = 'created_at', sortOrder = 'desc') {\n        if (!Array.isArray(results)) return [];\n        \n        const sortedResults = [...results];\n        \n        sortedResults.sort((a, b) => {\n            let valueA, valueB;\n            \n            switch (sortBy) {\n                case 'created_at':\n                    valueA = new Date(a.created_at || 0);\n                    valueB = new Date(b.created_at || 0);\n                    break;\n                    \n                case 'rating':\n                    valueA = a.rating || 0;\n                    valueB = b.rating || 0;\n                    break;\n                    \n                case 'generation_time':\n                    valueA = a.generation_time || 0;\n                    valueB = b.generation_time || 0;\n                    break;\n                    \n                case 'file_size':\n                    valueA = a.file_size || 0;\n                    valueB = b.file_size || 0;\n                    break;\n                    \n                case 'resolution':\n                    valueA = (a.width || 0) * (a.height || 0);\n                    valueB = (b.width || 0) * (b.height || 0);\n                    break;\n                    \n                case 'steps':\n                    valueA = a.steps || 0;\n                    valueB = b.steps || 0;\n                    break;\n                    \n                case 'cfg_scale':\n                    valueA = a.cfg_scale || 0;\n                    valueB = b.cfg_scale || 0;\n                    break;\n                    \n                default:\n                    valueA = a[sortBy] || '';\n                    valueB = b[sortBy] || '';\n            }\n            \n            if (valueA < valueB) return sortOrder === 'asc' ? -1 : 1;\n            if (valueA > valueB) return sortOrder === 'asc' ? 1 : -1;\n            return 0;\n        });\n        \n        return sortedResults;\n    },\n    \n    /**\n     * Gets unique values for filtering\n     */\n    getUniqueValues(results, field) {\n        if (!Array.isArray(results)) return [];\n        \n        const values = new Set();\n        \n        results.forEach(result => {\n            let value;\n            \n            switch (field) {\n                case 'model':\n                    value = result.model_used;\n                    break;\n                case 'resolution':\n                    value = this.getResolutionCategory(result);\n                    break;\n                case 'aspectRatio':\n                    value = this.getAspectRatio(result);\n                    break;\n                case 'tags':\n                    if (Array.isArray(result.tags)) {\n                        result.tags.forEach(tag => values.add(tag));\n                    }\n                    return;\n                default:\n                    value = result[field];\n            }\n            \n            if (value && value !== 'Unknown') {\n                values.add(value);\n            }\n        });\n        \n        return Array.from(values).sort();\n    },\n    \n    /**\n     * Creates gallery layout configuration\n     */\n    createGalleryLayout(results, viewMode = 'grid', columns = 3) {\n        if (!Array.isArray(results)) return { items: [], layout: {} };\n        \n        const layout = {\n            viewMode,\n            columns,\n            itemsPerPage: viewMode === 'grid' ? columns * 4 : 10,\n            aspectRatio: '1:1'\n        };\n        \n        const items = results.map((result, index) => {\n            const formatted = this.formatResult(result);\n            \n            return {\n                ...formatted,\n                index,\n                displayText: this.createDisplayText(formatted, viewMode),\n                thumbnailUrl: formatted.thumbnail_url || formatted.image_url,\n                aspectRatio: this.getAspectRatio(formatted)\n            };\n        });\n        \n        return { items, layout };\n    },\n    \n    /**\n     * Creates display text for result\n     */\n    createDisplayText(result, viewMode) {\n        if (viewMode === 'list') {\n            return {\n                title: this.truncateText(result.prompt, 50),\n                subtitle: `${result.width}×${result.height} • ${this.formatDate(result.created_at)}`,\n                details: `${result.steps} steps • CFG ${result.cfg_scale} • ${this.formatGenerationTime(result.generation_time)}`\n            };\n        }\n        \n        return {\n            title: this.truncateText(result.prompt, 30),\n            subtitle: `${result.width}×${result.height}`\n        };\n    },\n    \n    /**\n     * Truncates text to specified length\n     */\n    truncateText(text, maxLength) {\n        if (!text || text.length <= maxLength) return text;\n        return text.substring(0, maxLength - 3) + '...';\n    },\n    \n    /**\n     * Creates result statistics\n     */\n    getResultStatistics(results) {\n        if (!Array.isArray(results) || results.length === 0) {\n            return {\n                total: 0,\n                averageRating: 0,\n                averageGenerationTime: 0,\n                totalFileSize: 0,\n                resolutionDistribution: {},\n                modelDistribution: {},\n                aspectRatioDistribution: {}\n            };\n        }\n        \n        const stats = {\n            total: results.length,\n            averageRating: 0,\n            averageGenerationTime: 0,\n            totalFileSize: 0,\n            resolutionDistribution: {},\n            modelDistribution: {},\n            aspectRatioDistribution: {}\n        };\n        \n        let totalRating = 0;\n        let totalGenerationTime = 0;\n        let ratedResults = 0;\n        let timedResults = 0;\n        \n        results.forEach(result => {\n            // Rating statistics\n            if (result.rating && result.rating > 0) {\n                totalRating += result.rating;\n                ratedResults++;\n            }\n            \n            // Generation time statistics\n            if (result.generation_time && result.generation_time > 0) {\n                totalGenerationTime += result.generation_time;\n                timedResults++;\n            }\n            \n            // File size\n            if (result.file_size) {\n                stats.totalFileSize += result.file_size;\n            }\n            \n            // Resolution distribution\n            const resolution = this.getResolutionCategory(result);\n            stats.resolutionDistribution[resolution] = (stats.resolutionDistribution[resolution] || 0) + 1;\n            \n            // Model distribution\n            const model = result.model_used || 'Unknown';\n            stats.modelDistribution[model] = (stats.modelDistribution[model] || 0) + 1;\n            \n            // Aspect ratio distribution\n            const aspectRatio = this.getAspectRatio(result);\n            stats.aspectRatioDistribution[aspectRatio] = (stats.aspectRatioDistribution[aspectRatio] || 0) + 1;\n        });\n        \n        if (ratedResults > 0) {\n            stats.averageRating = totalRating / ratedResults;\n        }\n        \n        if (timedResults > 0) {\n            stats.averageGenerationTime = totalGenerationTime / timedResults;\n        }\n        \n        return stats;\n    }\n};\n\n// Export for use in other modules\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = { generationResults };\n} else if (typeof window !== 'undefined') {\n    window.generationResults = generationResults;\n}\n"],"mappings":"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","ignoreList":[]}