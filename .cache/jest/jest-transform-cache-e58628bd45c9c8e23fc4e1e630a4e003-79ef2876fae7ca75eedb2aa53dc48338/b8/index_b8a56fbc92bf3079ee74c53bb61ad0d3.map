{"version":3,"names":["fetchData","createRecommendationsComponent","window","isInitialized","isLoading","loading","showToast","toastMessage","toastType","activeTab","availableLoras","selectedLoraId","selectedLora","weights","semantic","artistic","technical","similarityLimit","similarityThreshold","promptText","promptLimit","promptIncludeInactive","promptSuggestions","computingEmbeddings","rebuildingIndex","embeddingProgress","embeddingStatus","exportConfig","loras","lora_files","lora_metadata","lora_embeddings","generations","generation_range","date_from","date_to","user_data","system_config","analytics","format","compression","split_archives","max_size_mb","encrypt","password","importConfig","mode","conflict_resolution","validate","backup_before","isExporting","isImporting","estimatedSize","estimatedTime","importFiles","importPreview","backupHistory","hasEncryptedFiles","showProgress","progressTitle","progressStep","progressPercent","progressMessages","migrationProgress","active","current_step","completed","total","status","logs","init","loadAvailableLoras","data","BACKEND_URL","items","error","showToastMessage","loadSelectedLora","find","lora","id","updateRecommendations","searchByPrompt","trim","resetWeights","computeAllEmbeddings","i","Promise","resolve","setTimeout","rebuildIndex","viewHealthReport","open","message","type"],"sources":["index.js"],"sourcesContent":["/**\n * Recommendations Component Module\n * \n * This module exports the existing recommendations component\n * in a format compatible with the new Vite-based system.\n */\n\nimport { fetchData } from '../utils/api.js';\n\n// For now, we'll create a simple wrapper that maintains backward compatibility\n// Later, this can be refactored to use proper ES modules\n\nexport function createRecommendationsComponent() {\n    // Check if the legacy component creator exists\n    if (typeof window !== 'undefined' && window.createRecommendationsComponent) {\n        return window.createRecommendationsComponent();\n    }\n    \n    // Fallback component if the legacy one isn't available\n    return {\n        // Initialization state (required for x-show guards)\n        isInitialized: false,\n        \n        isLoading: false,\n        loading: false,\n        showToast: false,\n        toastMessage: '',\n        toastType: 'success',\n        \n        // Tab state\n        activeTab: 'similarity',\n        \n        // Available LoRAs\n        availableLoras: [],\n        \n        // Similarity explorer\n        selectedLoraId: '',\n        selectedLora: null,\n        weights: {\n            semantic: 0.6,\n            artistic: 0.3,\n            technical: 0.1\n        },\n        similarityLimit: 10,\n        similarityThreshold: 0.1,\n        \n        // Prompt-based recommendations\n        promptText: '',\n        promptLimit: 10,\n        promptIncludeInactive: false,\n        promptSuggestions: [\n            'anime girl with pink hair',\n            'realistic portrait photography',\n            'fantasy landscape with magic',\n            'cyberpunk character design',\n            'traditional art style',\n            'watercolor painting effect',\n            'detailed facial features',\n            'medieval fantasy armor',\n            'modern city background',\n            'artistic lighting effects'\n        ],\n        \n        // Embedding status - THESE WERE MISSING\n        computingEmbeddings: false,\n        rebuildingIndex: false,\n        embeddingProgress: 0,\n        embeddingStatus: 'Ready',\n        \n        // Import/Export state (for compatibility)\n        exportConfig: {\n            loras: false,\n            lora_files: false,\n            lora_metadata: false,\n            lora_embeddings: false,\n            generations: false,\n            generation_range: 'all',\n            date_from: '',\n            date_to: '',\n            user_data: false,\n            system_config: false,\n            analytics: false,\n            format: 'zip',\n            compression: 'balanced',\n            split_archives: false,\n            max_size_mb: 1024,\n            encrypt: false,\n            password: ''\n        },\n        \n        importConfig: { \n            mode: 'merge', \n            conflict_resolution: 'ask', \n            validate: true, \n            backup_before: true, \n            password: '' \n        },\n        \n        isExporting: false,\n        isImporting: false,\n        estimatedSize: '0 MB',\n        estimatedTime: '0 minutes',\n        importFiles: [],\n        importPreview: [],\n        backupHistory: [],\n        hasEncryptedFiles: false,\n        showProgress: false,\n        progressTitle: '',\n        progressStep: '',\n        progressPercent: 0,\n        progressMessages: [],\n        \n        migrationProgress: { \n            active: false, \n            current_step: '', \n            completed: 0, \n            total: 100, \n            status: 'idle', \n            logs: [] \n        },\n        \n        init() {\n            // Initialize the component\n            this.loadAvailableLoras();\n            this.isInitialized = true;\n        },\n        \n        async loadAvailableLoras() {\n            this.isLoading = true;\n            try {\n                const data = await fetchData((window?.BACKEND_URL || '') + '/adapters');\n                this.availableLoras = data.items || data || [];\n            } catch (error) {\n                // Handle error silently or use proper error reporting\n                this.showToastMessage('Failed to load LoRAs', 'error');\n            } finally {\n                this.isLoading = false;\n            }\n        },\n        \n        loadSelectedLora() {\n            if (this.selectedLoraId) {\n                this.selectedLora = this.availableLoras.find(lora => lora.id === this.selectedLoraId);\n                this.updateRecommendations();\n            }\n        },\n\n        updateRecommendations() {\n            if (this.selectedLoraId) {\n                // Trigger similarity search (placeholder)\n            }\n        },\n\n        searchByPrompt() {\n            if (this.promptText.trim()) {\n                // Trigger prompt-based search (placeholder)\n            }\n        },\n\n        resetWeights() {\n            this.weights = {\n                semantic: 0.6,\n                artistic: 0.3,\n                technical: 0.1\n            };\n            this.updateRecommendations();\n        },\n\n        async computeAllEmbeddings() {\n            this.computingEmbeddings = true;\n            this.embeddingProgress = 0;\n            this.embeddingStatus = 'Starting embedding computation...';\n            \n            try {\n                // Simulate progress\n                for (let i = 0; i <= 100; i += 10) {\n                    this.embeddingProgress = i;\n                    this.embeddingStatus = `Computing embeddings... ${i}%`;\n                    await new Promise(resolve => setTimeout(resolve, 100));\n                }\n                \n                this.embeddingStatus = 'Embeddings computed successfully!';\n                this.showToastMessage('Embeddings computed successfully!', 'success');\n            } catch (error) {\n                this.embeddingStatus = 'Failed to compute embeddings';\n                this.showToastMessage('Failed to compute embeddings', 'error');\n            } finally {\n                setTimeout(() => {\n                    this.computingEmbeddings = false;\n                }, 2000);\n            }\n        },\n\n        async rebuildIndex() {\n            this.rebuildingIndex = true;\n            this.embeddingProgress = 0;\n            this.embeddingStatus = 'Rebuilding similarity index...';\n            \n            try {\n                // Simulate progress\n                for (let i = 0; i <= 100; i += 20) {\n                    this.embeddingProgress = i;\n                    this.embeddingStatus = `Rebuilding index... ${i}%`;\n                    await new Promise(resolve => setTimeout(resolve, 150));\n                }\n                \n                this.embeddingStatus = 'Index rebuilt successfully!';\n                this.showToastMessage('Index rebuilt successfully!', 'success');\n            } catch (error) {\n                this.embeddingStatus = 'Failed to rebuild index';\n                this.showToastMessage('Failed to rebuild index', 'error');\n            } finally {\n                setTimeout(() => {\n                    this.rebuildingIndex = false;\n                }, 2000);\n            }\n        },\n\n        viewHealthReport() {\n            window.open((window?.BACKEND_URL || '') + '/recommendations/health', '_blank');\n        },\n        \n        showToastMessage(message, type = 'success') {\n            this.toastMessage = message;\n            this.toastType = type;\n            this.showToast = true;\n            \n            // Auto-hide after 3 seconds\n            setTimeout(() => {\n                this.showToast = false;\n            }, 3000);\n        }\n    };\n}\n"],"mappings":"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","ignoreList":[]}